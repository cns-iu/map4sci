{"version":3,"sources":["./projects/map4sci/src/main.ts","./projects/map4sci/src/app/app.component.ts","./projects/map4sci/src/app/app.component.html","./projects/map4sci/src/app/map/map.module.ts","./projects/map4sci/src/app/services/map-data.service.ts","./projects/map4sci/src/app/app.module.ts","./projects/map4sci/src/environments/environment.ts","./projects/map4sci/src/app/map/map-defaults.ts","./projects/map4sci/src/app/map/map.ts","./projects/map4sci/src/app/map/zoom-level.control.ts","./projects/map4sci/src/app/map/minimap.ts","./projects/map4sci/src/app/map/map.component.ts","./projects/map4sci/src/app/map/map.component.html","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","import { Any } from '@angular-ru/common/typings';\nimport { Component, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { EMPTY_DATASET, MapDataset } from './map/map';\nimport { MapDataService } from './services/map-data.service';\n\n\n@Component({\n  selector: 'm4s-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n  private subscriptions = new Subscription();\n\n  constructor(readonly mapData: MapDataService) { }\n\n  dataset = EMPTY_DATASET;\n\n  get displayMap(): boolean {\n    const { dataset } = this;\n    if (!dataset.nodes) {\n      return false;\n    }\n    if (!dataset.nodes.features) {\n      return false;\n    }\n    if (dataset.nodes.features.length < 1) {\n      return false;\n    }\n\n    return true;\n  }\n\n  ngOnInit(): void {\n    this.subscriptions.add(\n      this.mapData.dataset$.subscribe(ds => this.dataset = ds as unknown as MapDataset)\n    );\n  }\n\n  mapDataSwitcherChange(event: Any): void {\n    const mapId: string = event.target.value;\n    this.mapData.setDataset(mapId);\n  }\n}\n","<select class=\"dataset-selector\"\n  *ngIf=\"(this.mapData.datasetDirectory$ | async)!.length > 1\"\n  (input)=\"mapDataSwitcherChange($event)\">\n  <option *ngFor=\"let dataset of (this.mapData.datasetDirectory$ | async)\" [value]=\"dataset.id\">\n      {{ dataset.name }}\n  </option>\n</select>\n\n<div class=\"map-wrapper\">\n  <m4s-map\n    *ngIf=\"displayMap\"\n    [edgeFeatures]=\"dataset.edges\"\n    [nodeFeatures]=\"dataset.nodes\"\n    [clusterFeatures]=\"dataset.cluster\"\n    [boundaryFeatures]=\"dataset.boundary\"\n    [edgesConfig]=\"dataset.config?.edgeConfig\"\n    [nodesConfig]=\"dataset.config?.nodeConfig\"\n    [initialZoomConfig]=\"dataset.config?.initialZoom\"\n    [mapCenterConfig]=\"dataset.config?.mapCenter\"\n    [textOverlapEnabledZoomConfig]=\"dataset.config?.textOverlapEnabledZoom\"\n    [minimapConfig]=\"dataset.config?.minimapConfig\"\n  ></m4s-map>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NgxMapboxGLModule } from 'ngx-mapbox-gl';\n\nimport { MapComponent } from './map.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    NgxMapboxGLModule.withConfig({\n      accessToken: 'pk.eyJ1IjoiZWRsdTc3NyIsImEiOiJja2wycDV2dzAwazg1MnFxamd2dDFmdmlyIn0.UxjI5qHgJIN5NZFJRi37DA',\n    })\n  ],\n  declarations: [MapComponent],\n  exports: [MapComponent]\n})\nexport class MapModule { }\n","import { Immutable } from '@angular-ru/common/typings';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable, OnDestroy } from '@angular/core';\nimport { BehaviorSubject, forkJoin, Observable, of, Subscription } from 'rxjs';\nimport { catchError, take, tap } from 'rxjs/operators';\n\nimport { Edge, EMPTY_DATASET, MapDataset, MapDatasetDirectory } from '../map/map';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapDataService implements OnDestroy {\n  private files: string[] = [ 'boundary', 'cluster', 'edges', 'nodes' ];\n\n  private emptyDataset = EMPTY_DATASET as Immutable<MapDataset>;\n  private datasetSubject = new BehaviorSubject<Immutable<MapDataset>>(this.emptyDataset);\n  private datasetDirectorySubject = new BehaviorSubject<Immutable<MapDatasetDirectory[]>>([]);\n  private subscriptions = new Subscription();\n\n  public dataset$ = this.datasetSubject.asObservable();\n  public datasetDirectory$ = this.datasetDirectorySubject.asObservable();\n\n  constructor(private readonly http: HttpClient) {\n    // Grab the dataset directory index\n    this.http.get<MapDatasetDirectory[]>('assets/datasets/index.json')\n      .pipe(take(1), tap((dir) => this.datasetDirectorySubject.next(dir)))\n      .subscribe();\n\n    // Set current dataset to the 'first' dataset whenever a directory is loaded\n    this.subscriptions.add(\n      this.datasetDirectory$.pipe(tap((dir) => {\n        if (dir.length > 0) { this.setDataset(dir[0].id); }\n      })).subscribe()\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  setDataset(id: string): void {\n    // Send an empty dataset to clear the map\n    this.datasetSubject.next(this.emptyDataset);\n\n    this.getDataset(id)\n      .subscribe((dataset) => this.datasetSubject.next(dataset));\n  }\n\n  getDataset(id: string): Observable<Immutable<MapDataset>> {\n    const dataDirectory = this.datasetDirectorySubject.getValue();\n    if (!dataDirectory || !dataDirectory.find(d => d.id === id)) {\n      return of(EMPTY_DATASET) as Observable<Immutable<MapDataset>>;\n    }\n\n    const selectedDirectory = dataDirectory.find(d => d.id === id);\n    const baseUrl = selectedDirectory?.dir as string;\n    const dataReqs = {} as Record<string, Observable<MapDataset | Node[] | Edge[]>>;\n\n    for (const file of this.files) {\n      dataReqs[file] = this.http.get<MapDataset>(`${baseUrl}/${file}.geojson`);\n    }\n\n    if (selectedDirectory?.config) {\n      dataReqs.config = this.http.get<MapDataset>(`${baseUrl}/${selectedDirectory.config}`);\n    }\n\n    return forkJoin(dataReqs)\n      .pipe(catchError(m => of(this.emptyDataset)), take(1));\n  }\n}\n","import { MapDataService } from './services/map-data.service';\nimport { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\n\nimport { AppComponent } from './app.component';\nimport { MapModule } from './map/map.module';\nimport { HttpClientModule } from '@angular/common/http';\n\n\n@NgModule({\n  imports: [\n    BrowserModule,\n    MapModule,\n    HttpClientModule\n  ],\n  providers: [MapDataService],\n  declarations: [AppComponent],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Style } from 'mapbox-gl';\n\nimport { Edge, MiniMapOptions, Node } from './map';\n\n\nexport const defaultInitialZoom = 2;\nexport const blankStyle: Style = {\n  version: 8,\n  name: 'Blank',\n  center: [0, 0],\n  zoom: defaultInitialZoom,\n  sources: {},\n  sprite: 'https://cdn.jsdelivr.net/gh/lukasmartinelli/osm-liberty@gh-pages/sprites/osm-liberty',\n  glyphs: 'https://cdn.jsdelivr.net/gh/orangemug/font-glyphs@gh-pages/glyphs/{fontstack}/{range}.pbf',\n  layers: [\n    {\n      id: 'background',\n      type: 'background',\n      paint: {\n        'background-color': 'white'\n      }\n    }\n  ]\n};\nexport const defaultMinimapOptions: MiniMapOptions = {\n  id: 'mapboxgl-minimap',\n  width: '320px',\n  height: '180px',\n  style: blankStyle,\n  center: [0, 0],\n  zoom: 0,\n\n  containerStyles: `\n    border: 1px solid lightgray;\n    border-radius: 5px;\n    -webkit-box-shadow: 3px 3px 5px 4px #00000021;\n    -moz-box-shadow: 3px 3px 5px 4px #00000021;\n    box-shadow: 3px 3px 5px 4px #00000021;\n  `,\n\n  // should be a function; will be bound to Minimap\n  zoomAdjust: null,\n\n  // [a, b, c]\n  // if parent map zoom >= a, and minimap zoom >= b, set minimap zoom to c\n  // must be defined from most zoomed in rule, to least zoomed in rule.\n  zoomLevels: [\n    [9, 3, 4],\n    [8, 2, 3],\n    [6, 0, 2]\n  ],\n\n  edgeColor: '#08F',\n  edgeWidth: 1,\n  edgeOpacity: 1,\n\n  fillColor: '#F80',\n  fillOpacity: 0.25,\n\n  dragPan: false,\n  scrollZoom: false,\n  boxZoom: false,\n  dragRotate: false,\n  keyboard: false,\n  doubleClickZoom: false,\n  touchZoomRotate: false\n};\nexport const defaultNodes: Node[] = [\n  { level: 0, zoom: 0.0, fontSize: 0 },\n  { level: 1, zoom: 0.0, fontSize: 20 },\n  { level: 2, zoom: 4.0, fontSize: 18 },\n  { level: 3, zoom: 5.0, fontSize: 18 },\n  { level: 4, zoom: 5.5, fontSize: 16 },\n  { level: 5, zoom: 6.0, fontSize: 16 },\n  { level: 6, zoom: 6.2, fontSize: 14 },\n  { level: 7, zoom: 6.5, fontSize: 14 },\n  { level: 8, zoom: 6.7, fontSize: 12 },\n  { level: 9, zoom: 7.5, fontSize: 12 }\n];\nexport const defaultEdges: Edge[] = [\n  { level: 0, zoom: 0, color: '', width: 0, opacity: 0.0, borderOpacity: 0.0, borderColor: '', borderWidth: 0 },\n  { level: 1, zoom: 1.5, color: '#FFEBA1', width: 3.2, opacity: 1.0, borderOpacity: 1.0, borderColor: 'yellow', borderWidth: 1.2 },\n  { level: 2, zoom: 3.5, color: '#FFEBA1', width: 3, opacity: 1.0, borderOpacity: 1.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 3, zoom: 4.5, color: '#F9D776', width: 2.7, opacity: 0.9, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 4, zoom: 5.0, color: '#c1b276', width: 2.7, opacity: 0.9, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 5, zoom: 5.4, color: '#94895f', width: 2.2, opacity: 0.8, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 6, zoom: 5.7, color: '#615b43', width: 2.2, opacity: 0.8, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 7, zoom: 6.0, color: 'gray', width: 2, opacity: 0.7, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 8, zoom: 6.2, color: 'gray', width: 2, opacity: 0.6, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 9, zoom: 7.0, color: 'gray', width: 1, opacity: 0.5, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 }\n];\nexport const defaultTextOverlapEnabledZoom = 3;\nexport const defaultMapCenter: [number, number] = [0, 0];\n","import { Any, Immutable } from '@angular-ru/common/typings';\nimport { FeatureCollection } from 'geojson';\nimport { LngLatBoundsLike, Style } from 'mapbox-gl';\n\n\nexport interface Edge {\n  level: number;\n  zoom: number;\n  color?: string;\n  width?: number;\n  opacity?: number;\n  borderOpacity?: number;\n  borderColor?: string;\n  borderWidth?: number;\n}\n\nexport interface Node {\n  level: number;\n  zoom: number;\n  fontSize: number;\n}\n\nexport interface Cluster {\n  fillOpacity: number;\n  borderLineWidth: number;\n  borderLineOpacity: number;\n  borderLineMinZoom: number;\n}\n\nexport interface MapSources {\n  clusters: FeatureCollection;\n  nodes: FeatureCollection;\n}\n\nexport type ZoomLevel = [number, number, number];\nexport interface MiniMapOptions {\n  id: number | string;\n  width: string;\n  height: string;\n  style: Style;\n  center: [number, number];\n  zoom: number;\n  containerStyles: string;\n  zoomAdjust: null | (() => unknown);\n  zoomLevels: ZoomLevel[];\n  edgeColor: string;\n  edgeWidth: number;\n  edgeOpacity: number;\n  fillColor: string;\n  fillOpacity: number;\n  dragPan: boolean;\n  scrollZoom: boolean;\n  boxZoom: boolean;\n  dragRotate: boolean;\n  keyboard: boolean;\n  doubleClickZoom: boolean;\n  touchZoomRotate: boolean;\n  maxBounds?: LngLatBoundsLike;\n  bounds?: Any;\n}\n\nexport type PopupContent = (string | [string, ((input: Any) => string)])[];\n\nexport interface PopupLayer {\n  layer: string;\n  content: PopupContent;\n}\n\nexport interface MapMarkerConfig {\n  color?: string;\n  rotation?: number;\n}\nexport interface MapMarker {\n  config?: MapMarkerConfig;\n  coordinates: [number, number];\n  title: string;\n}\n\nexport interface ZoomLookupItem {\n  zoom: number;\n}\nexport type ZoomLookup = ZoomLookupItem[];\n\nexport interface MapDatasetConfig {\n  nodeConfig?: Node[];\n  edgeConfig?: Edge[];\n  minimapConfig?: MiniMapOptions;\n  mapCenter?: [number, number];\n  initialZoom?: number;\n  textOverlapEnabledZoom?: number;\n}\n\nexport interface MapDataset {\n  [id: string]: FeatureCollection | MapDatasetConfig | undefined;\n  boundary: FeatureCollection;\n  cluster: FeatureCollection;\n  edges: FeatureCollection;\n  nodes: FeatureCollection;\n  config?: MapDatasetConfig;\n}\n\nexport interface MapDatasetCache {\n  [key: string]: Immutable<MapDataset>;\n}\n\nexport interface MapDatasetDirectory {\n  id: string;\n  name: string;\n  dir: string;\n  config?: string;\n}\n\nexport const EMPTY_FEATURES: FeatureCollection = {\n  type: 'FeatureCollection',\n  features: []\n};\n\nexport const EMPTY_DATASET: MapDataset = {\n  boundary: EMPTY_FEATURES,\n  cluster: EMPTY_FEATURES,\n  edges: EMPTY_FEATURES,\n  nodes: EMPTY_FEATURES\n};\n","import { IControl, Map as MapboxMap } from 'mapbox-gl';\n\n\nexport class ZoomLevelControl implements IControl {\n  container?: HTMLElement;\n  map?: MapboxMap;\n  zoomCallback?: () => void;\n\n  onAdd(map: MapboxMap): HTMLElement {\n    this.map = map;\n    this.container = document.createElement('div');\n    this.container.className = 'mapboxgl-zoom-level-display';\n    this.updateText();\n    this.zoomCallback = () => this.updateText();\n    map.on('zoom', this.zoomCallback);\n    return this.container;\n  }\n\n  updateText(): void {\n    if (this.map && this.container) {\n      this.container.textContent = this.map.getZoom().toFixed(2) + 'x';\n    }\n  }\n\n  onRemove(map: MapboxMap): void {\n    // tslint:disable-next-line: no-non-null-assertion\n    map.off('zoom', this.zoomCallback!);\n    this.container?.parentNode?.removeChild(this.container);\n  }\n}\n","import { Feature, Polygon } from 'geojson';\nimport { GeoJSONSource, LngLatBounds, Map as MapboxMap, MapMouseEvent, Style } from 'mapbox-gl';\nimport { MapSources, MiniMapOptions } from './map';\n\n\n/*\n  This is a modified and updated version of Brendan Matkin's Mapboxgl-Minimap:\n  https://github.com/brendanmatkin/mapboxgl-minimap\n*/\n\nconst blankStyle: Style = {\n  version: 8,\n  name: 'Blank',\n  center: [0, 0],\n  zoom: 0,\n  sources: {},\n  sprite: 'https://cdn.jsdelivr.net/gh/lukasmartinelli/osm-liberty@gh-pages/sprites/osm-liberty',\n  glyphs: 'https://cdn.jsdelivr.net/gh/orangemug/font-glyphs@gh-pages/glyphs/{fontstack}/{range}.pbf',\n  layers: [\n    {\n      id: 'background',\n      type: 'background',\n      paint: {\n        'background-color': 'rgba(255,255,255,1)'\n      }\n    }\n  ]\n};\n\nexport class MiniMap {\n  sources: MapSources;\n  options: MiniMapOptions;\n  ticking: boolean;\n  lastMouseMoveEvent: null;\n  parentMap!: MapboxMap;\n  isDragging: boolean;\n  isCursorOverFeature: boolean;\n  previousPoint: number[];\n  currentPoint: number[];\n  trackingRectCoordinates: number[][][];\n  container?: HTMLDivElement;\n  miniMap!: MapboxMap;\n  trackingRect!: GeoJSONSource;\n  trackingRectData!: Feature<Polygon>;\n  miniMapCanvas!: HTMLElement;\n\n  constructor(sources: MapSources, options: MiniMapOptions) {\n    this.sources = sources;\n    this.options = options;\n    Object.assign(this.options, options);\n\n    this.ticking = false;\n    this.lastMouseMoveEvent = null;\n    this.isDragging = false;\n    this.isCursorOverFeature = false;\n    this.previousPoint = [0, 0];\n    this.currentPoint = [0, 0];\n    this.trackingRectCoordinates = [[[], [], [], [], []]];\n  }\n\n  onAdd(parentMap: MapboxMap): HTMLDivElement {\n    this.parentMap = parentMap;\n\n    const opts = this.options;\n    const container = this.container = this.createContainer(parentMap);\n    const miniMap = this.miniMap = new MapboxMap({\n      attributionControl: false,\n      container,\n      style: blankStyle,\n      zoom: opts.zoom,\n      center: opts.center\n    });\n\n    if (opts.maxBounds) { miniMap.setMaxBounds(opts.maxBounds); }\n\n    miniMap.on('load', this.load.bind(this));\n\n    return this.container;\n  }\n\n  onRemove(parentMap: MapboxMap): void {\n    return;\n  }\n\n  load(): void {\n    const opts = this.options;\n    const parentMap = this.parentMap;\n    const miniMap = this.miniMap;\n    const interactions = [\n      'dragPan', 'scrollZoom', 'boxZoom', 'dragRotate',\n      'keyboard', 'doubleClickZoom', 'touchZoomRotate'\n    ];\n\n    interactions.forEach((i: string) => {\n      const key = i as keyof MiniMapOptions;\n      const map = this.miniMap as unknown as { [key: string]: { disable: () => void } };\n      if (opts[key] !== true) {\n        map[i].disable();\n      }\n    });\n\n    if (typeof opts.zoomAdjust === 'function') {\n      this.options.zoomAdjust = opts.zoomAdjust.bind(this);\n    } else if (opts.zoomAdjust === null) {\n      this.options.zoomAdjust = this.zoomAdjust.bind(this);\n    }\n\n    const bounds = miniMap.getBounds();\n\n    this.convertBoundsToPoints(bounds);\n\n    this.trackingRectData = {\n      type: 'Feature',\n      properties: {\n        name: 'trackingRect'\n      },\n      geometry: {\n        type: 'Polygon',\n        coordinates: this.trackingRectCoordinates\n      }\n    };\n\n    miniMap.addSource('trackingRect', { type: 'geojson', data: this.trackingRectData });\n\n    // Add the geojson layers of our data so the minimap matches the parent map\n    miniMap.addLayer({\n      id: 'cluster',\n      type: 'fill',\n      source: { type: 'geojson', data: this.sources.clusters },\n      layout: {},\n      paint: {\n        'fill-color': ['get', 'fill'],\n        'fill-opacity': 0.7,\n        'fill-outline-color': ['get', 'stroke']\n      },\n    });\n    miniMap.addLayer({\n      id: 'cluster_boundary',\n      type: 'line',\n      minzoom: 2,\n      source: { type: 'geojson', data: this.sources.clusters },\n      layout: {},\n      paint: {\n        'line-color': ['get', 'stroke'],\n        'line-width': 0.5,\n        'line-opacity': 0.8\n      },\n    });\n    miniMap.addLayer({\n      id: 'node_labels',\n      type: 'symbol',\n      minzoom: 2,\n      source: { type: 'geojson', data: this.sources.nodes },\n      layout: {\n        'text-field': '{label}',\n        'text-font': ['Open Sans Regular'],\n        'text-size': 14,\n        'text-anchor': 'center',\n        'text-justify': 'center',\n        'text-allow-overlap': false\n\n      },\n      filter: ['==', 'level', 1]\n    });\n    miniMap.addLayer({\n      id: 'node_labels_2',\n      type: 'symbol',\n      minzoom: 3,\n      source: { type: 'geojson', data: this.sources.nodes },\n      layout: {\n        'text-field': '{label}',\n        'text-font': ['Open Sans Regular'],\n        'text-size': 9,\n        'text-anchor': 'center',\n        'text-justify': 'center'\n      },\n      filter: ['all',\n        ['<=', 'level', 3],\n        ['>', 'level', 1]\n      ]\n    });\n\n    miniMap.addLayer({\n      id: 'trackingRectOutline',\n      type: 'line',\n      source: 'trackingRect',\n      layout: {},\n      paint: {\n        'line-color': opts.edgeColor,\n        'line-width': opts.edgeWidth,\n        'line-opacity': opts.edgeOpacity\n      }\n    });\n\n    // needed for dragging\n    miniMap.addLayer({\n      id: 'trackingRectFill',\n      type: 'fill',\n      source: 'trackingRect',\n      layout: {},\n      paint: {\n        'fill-color': opts.fillColor,\n        'fill-opacity': opts.fillOpacity\n      }\n    });\n\n    this.trackingRect = this.miniMap.getSource('trackingRect') as GeoJSONSource;\n\n    this.update();\n\n    parentMap.on('move', this.update.bind(this));\n\n    miniMap.on('mousemove', this.mouseMove.bind(this));\n    miniMap.on('mousedown', this.mouseDown.bind(this));\n    miniMap.on('mouseup', this.mouseUp.bind(this));\n\n    miniMap.on('touchmove', this.mouseMove.bind(this));\n    miniMap.on('touchstart', this.mouseDown.bind(this));\n    miniMap.on('touchend', this.mouseUp.bind(this));\n\n    this.miniMapCanvas = miniMap.getCanvasContainer();\n    this.miniMapCanvas.addEventListener('wheel', this.preventDefault);\n    this.miniMapCanvas.addEventListener('mousewheel', this.preventDefault);\n  }\n\n  mouseDown(e: MapMouseEvent): void {\n    if (this.isCursorOverFeature) {\n      this.isDragging = true;\n      this.previousPoint = this.currentPoint;\n      this.currentPoint = [e.lngLat.lng, e.lngLat.lat];\n    }\n  }\n\n  mouseMove(e: MapMouseEvent): void {\n    this.ticking = false;\n\n    const miniMap = this.miniMap;\n    const features = miniMap.queryRenderedFeatures(e.point, {\n      layers: ['trackingRectFill']\n    });\n\n    // don't update if we're still hovering the area\n    if (!(this.isCursorOverFeature && features.length > 0)) {\n      this.isCursorOverFeature = features.length > 0;\n      this.miniMapCanvas.style.cursor = this.isCursorOverFeature ? 'move' : '';\n    }\n\n    if (this.isDragging) {\n      this.previousPoint = this.currentPoint;\n      this.currentPoint = [e.lngLat.lng, e.lngLat.lat];\n\n      const offset = [\n        this.previousPoint[0] - this.currentPoint[0],\n        this.previousPoint[1] - this.currentPoint[1]\n      ];\n\n      const newBounds = this.moveTrackingRect(offset);\n\n      this.parentMap.fitBounds(newBounds, { duration: 80, linear: true });\n    }\n  }\n\n  mouseUp(): void {\n    this.isDragging = false;\n    this.ticking = false;\n  }\n\n  moveTrackingRect(offset: number[]): LngLatBounds {\n    const rectPoints = this.trackingRectCoordinates[0] as [number, number][];\n    const bounds = new LngLatBounds();\n    rectPoints.forEach(coord => bounds.extend(coord));\n\n    const ne = bounds.getNorthEast();\n    const sw = bounds.getSouthWest();\n    ne.lat -= offset[1];\n    ne.lng -= offset[0];\n    sw.lat -= offset[1];\n    sw.lng -= offset[0];\n\n    this.convertBoundsToPoints(bounds);\n    this.trackingRect.setData(this.trackingRectData);\n\n    return bounds;\n  }\n\n  setTrackingRectBounds(bounds: LngLatBounds): void {\n    this.convertBoundsToPoints(bounds);\n    this.trackingRect.setData(this.trackingRectData);\n  }\n\n  convertBoundsToPoints(bounds: LngLatBounds): void {\n    const ne = bounds.getNorthEast();\n    const sw = bounds.getSouthWest();\n    const trc = this.trackingRectCoordinates;\n\n    trc[0][0][0] = ne.lng;\n    trc[0][0][1] = ne.lat;\n    trc[0][1][0] = sw.lng;\n    trc[0][1][1] = ne.lat;\n    trc[0][2][0] = sw.lng;\n    trc[0][2][1] = sw.lat;\n    trc[0][3][0] = ne.lng;\n    trc[0][3][1] = sw.lat;\n    trc[0][4][0] = ne.lng;\n    trc[0][4][1] = ne.lat;\n  }\n\n  update(): void {\n    if (this.isDragging) {\n      return;\n    }\n\n    const parentBounds = this.parentMap.getBounds();\n\n    this.setTrackingRectBounds(parentBounds);\n\n    if (typeof this.options.zoomAdjust === 'function') {\n      this.options.zoomAdjust();\n    }\n  }\n\n  zoomAdjust(): void {\n    const miniMap = this.miniMap;\n    const parentMap = this.parentMap;\n    const miniZoom = miniMap.getZoom();\n    const parentZoom = parentMap.getZoom();\n    const levels = this.options.zoomLevels;\n    let found = false;\n\n    levels.forEach((zoom: any[]) => {\n      if (!found && parentZoom >= zoom[0]) {\n        if (miniZoom >= zoom[1]) {\n          miniMap.setZoom(zoom[2]);\n        }\n\n        miniMap.setCenter(parentMap.getCenter());\n        found = true;\n      }\n    });\n\n    if (!found && miniZoom !== this.options.zoom) {\n      if (typeof this.options.bounds === 'object') {\n        miniMap.fitBounds(this.options.bounds, { duration: 50 });\n      }\n\n      miniMap.setZoom(this.options.zoom);\n    }\n  }\n\n  createContainer(parentMap: MapboxMap): HTMLDivElement {\n    const opts = this.options;\n    const container = document.createElement('div');\n\n    container.className = 'mapboxgl-ctrl-minimap mapboxgl-ctrl';\n    container.setAttribute('style', 'width: ' + opts.width + '; height: ' + opts.height + '; ' + opts.containerStyles);\n    container.addEventListener('contextmenu', this.preventDefault);\n\n    parentMap.getContainer().appendChild(container);\n\n    if (opts.id !== '') {\n      container.id = opts.id.toString();\n    }\n\n    return container;\n  }\n\n  preventDefault(e: { preventDefault: () => void }): void {\n    e.preventDefault();\n  }\n}\n","import { Any } from '@angular-ru/common/typings';\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { FeatureCollection } from 'geojson';\nimport { FullscreenControl, Layout, Map, MapLayerMouseEvent, Marker, NavigationControl, Popup } from 'mapbox-gl';\n\nimport { Edge, MapMarker, MiniMapOptions, Node, PopupContent, PopupLayer, ZoomLookup } from './map';\nimport { blankStyle, defaultEdges, defaultInitialZoom, defaultMapCenter, defaultMinimapOptions,\n  defaultNodes, defaultTextOverlapEnabledZoom } from './map-defaults';\nimport { MiniMap } from './minimap';\nimport { ZoomLevelControl } from './zoom-level.control';\n\n\n@Component({\n  selector: 'm4s-map',\n  templateUrl: './map.component.html',\n  styleUrls: ['./map.component.scss']\n})\nexport class MapComponent {\n  // Inputs\n  @Input() mapStyle = blankStyle;\n  @Input() edgeFeatures!: FeatureCollection;\n  @Input() nodeFeatures!: FeatureCollection;\n  @Input() clusterFeatures!: FeatureCollection;\n  @Input() boundaryFeatures!: FeatureCollection;\n  @Input() currentZoom = defaultInitialZoom;\n  @Input() mapMarkers: MapMarker[] = [];\n\n  private initialZoomConfig: number = defaultInitialZoom;\n  @Input('initialZoomConfig')\n  set InitialZoomConfig(initialZoom: number | undefined) {\n    this.initialZoomConfig = initialZoom || defaultInitialZoom;\n  }\n\n  private minimapConfig: MiniMapOptions = defaultMinimapOptions;\n  @Input('minimapConfig')\n  set MinimapConfig(options: MiniMapOptions | undefined) {\n    this.minimapConfig = options || defaultMinimapOptions;\n  }\n\n  private edgesConfig: Edge[] = defaultEdges;\n  @Input('edgesConfig')\n  set EdgesConfig(edges: Edge[] | undefined) {\n    this.edgesConfig = edges || defaultEdges;\n  }\n\n  private nodesConfig: Node[] = defaultNodes;\n  @Input('nodesConfig')\n  set NodesConfig(nodes: Node[] | undefined) {\n    this.nodesConfig = nodes || defaultNodes;\n  }\n\n  private textOverlapEnabledZoomConfig: number = defaultTextOverlapEnabledZoom;\n  @Input('textOverlapEnabledZoomConfig')\n  set TextOverlapEnabledZoomConfig(zoom: number | undefined) {\n    this.textOverlapEnabledZoomConfig = zoom || defaultTextOverlapEnabledZoom;\n  }\n\n  mapCenterConfig: [number, number] = defaultMapCenter;\n  @Input('mapCenterConfig')\n  set MapCenterConfig(mapCenter: [number , number] | undefined) {\n    this.mapCenterConfig = mapCenter || defaultMapCenter;\n  }\n\n  // Outputs\n  @Output() nodeClick = new EventEmitter<MapLayerMouseEvent>();\n  @Output() edgeClick = new EventEmitter<MapLayerMouseEvent>();\n  @Output() zoomChange = new EventEmitter<number>();\n  @Output() panChange = new EventEmitter<[number, number]>();\n\n  map!: Map;\n  nodeZoomIndex = 0;\n  edgeZoomIndex = 0;\n  hoverEdgeID: string | number | undefined;\n  hoverNodeID: string | number | undefined;\n  textOverlapEnabled = false;\n\n  // These allow the layer tags to be much more readable.\n  currentNodeFormula: Any = ['at', ['get', 'level'], ['literal', this.nodesConfig]];\n  currentEdgeFormula: Any = ['get', 'zoom', ['at', ['get', 'level'], ['literal', this.edgesConfig]]];\n  edgeFormula = ['at', ['get', 'level'], ['literal', this.edgesConfig]];\n  // tslint:disable-next-line: no-non-null-assertion\n  lastEdgeFormula = ['at', this.edgesConfig!.length - 1, ['literal', this.edgesConfig]];\n\n  nodeLabelsLayout: Layout = {\n    'text-field': '{label}',\n    'text-font': ['Open Sans Regular'],\n    'text-size': ['get', 'fontSize', this.currentNodeFormula],\n    'text-variable-anchor': ['top', 'bottom', 'top-left', 'top-right', 'bottom-left', 'bottom-right', 'left', 'right', 'center'],\n    'text-radial-offset': 0.25,\n    'text-allow-overlap': false\n  } as unknown as Layout;\n\n  /*\n    Popup content needs to follow specific pattern to function properly.\n    Property names will be used to look up data from the geoJson sources.\n    Pass in format ['<anyHTML>and text</anyHTML><p>', 'propertyName', '</p>more html or text']\n\n    You can pass in as many as you like but they need to alternate between raw html, and property names.\n    You can also pass in a formatter with the property name in format ['propertyName', formatterMethod]\n  */\n  popups: PopupLayer[] = [\n    {\n        layer: 'edges',\n        content: [\n            '<p class=\"popup-label\">Edge</p><p>',\n            ['label', this.capitalizeFirstLetter],\n            '</p>'\n        ]\n    },\n    {\n        layer: 'nodes',\n        content: [\n            '<p class=\"popup-label\">Node</p><p>',\n            'label',\n            '</p>'\n        ]\n    }\n  ];\n\n  containerStyles = `\n      border: 1px solid lightgray;\n      border-radius: 5px;\n      -webkit-box-shadow: 3px 3px 5px 4px #00000021;\n      -moz-box-shadow: 3px 3px 5px 4px #00000021;\n      box-shadow: 3px 3px 5px 4px #00000021;\n  `;\n\n  capitalizeFirstLetter(input: string): string {\n    return input.charAt(0).toUpperCase() + input.slice(1);\n  }\n\n  nodeClicked(event: MapLayerMouseEvent): void {\n    this.nodeClick.emit(event);\n  }\n\n  edgeClicked(event: MapLayerMouseEvent): void {\n    this.edgeClick.emit(event);\n  }\n\n  onMapLoad(map: Map): void {\n    this.map = map;\n\n    if (this.initialZoomConfig !== defaultInitialZoom) {\n      map.setZoom(this.initialZoomConfig);\n    }\n\n    this.currentZoom = map.getZoom();\n\n    // Use the same map center for the minimap unless the minimapOptions have been customized.\n    if (this.minimapConfig === defaultMinimapOptions) {\n      this.minimapConfig.center = this.mapCenterConfig;\n    }\n\n    // ShowCompass off to disable rotation.\n    map.addControl(new NavigationControl({ showCompass: false }), 'top-right');\n    map.addControl(new FullscreenControl({}), 'top-right');\n    if (this.nodeFeatures.features.length === 0) {\n      console.warn('0 node features.');\n    } else if (this.clusterFeatures.features.length === 0) {\n      console.warn('0 cluster features');\n    } else {\n      map.addControl(new MiniMap({nodes: this.nodeFeatures, clusters: this.clusterFeatures}, this.minimapConfig), 'bottom-right');\n    }\n    map.addControl(new ZoomLevelControl(), 'bottom-right');\n\n    this.map.resize();\n\n    this.addMapMarkers(this.mapMarkers);\n    this.addEdgeHover(map);\n    this.addNodeHover(map);\n    this.addPopups();\n\n    // When the user zooms the map, this method handles showing and hiding data based on zoom level\n    map.on('zoom', () => this.updateFilters());\n    map.on('zoomend', () => this.zoomChange.emit(this.map.getZoom()));\n    map.on('moveend', () => this.panChange.emit(this.map.getCenter().toArray() as [number, number]));\n  }\n\n  addMapMarkers(markers: MapMarker[]): void {\n    if (!markers.length) {\n      return;\n    }\n\n    markers.forEach(marker => {\n      const popup = new Popup({\n        closeOnClick: true,\n        closeOnMove: true,\n        closeButton: false,\n        className: 'map-marker-popup'\n      }).setHTML(`<h3>${marker.title}</h3>`);\n\n      new Marker(marker.config || {})\n        .setLngLat(marker.coordinates)\n        .setPopup(popup)\n        .addTo(this.map);\n    });\n  }\n\n  // In order to show more or less data based on the zoom level we have to update the layer filters when the map zooms.\n  updateFilters(): void {\n    const { map, edgesConfig, nodesConfig, textOverlapEnabledZoomConfig, textOverlapEnabled } = this;\n    const currentZoom: number = map.getZoom();\n\n    // When the zoom level changes, check if we need to display a different set of nodes. If we do, update the node filter.\n    if (this.nodeLevelChange()) {\n      const currentNode = ['get', 'zoom', ['at', ['get', 'level'], ['literal', nodesConfig]]];\n      map.setFilter('node_labels', ['>=', currentZoom, currentNode]);\n    }\n\n    // When the zoom level changes, check if we need to display a different set of edges. If we do, update the edges filter.\n    // We decided showing the nodes (without labels) at the same time as the edges was preferable, instead of waiting for\n    // when the labels will fit.\n    if (this.edgeLevelChange()) {\n      const currentEdge = ['get', 'zoom', ['at', ['get', 'level'], ['literal', edgesConfig]]];\n      map.setFilter('nodes', ['>=', currentZoom, currentEdge]);\n      map.setFilter('edges_border', ['>=', currentZoom, currentEdge]);\n      map.setFilter('edges', ['>=', currentZoom, currentEdge]);\n    }\n\n    //  Determing if text overlap should be enabled or disabled based on the break point set in the config object.\n    if (!textOverlapEnabled && currentZoom > textOverlapEnabledZoomConfig) {\n      map.setLayoutProperty('node_labels', 'text-allow-overlap', true);\n      this.textOverlapEnabled = true;\n    } else if (textOverlapEnabled && currentZoom < textOverlapEnabledZoomConfig) {\n      map.setLayoutProperty('node_labels', 'text-allow-overlap', false);\n      this.textOverlapEnabled = false;\n    }\n  }\n\n  // Returns whether or not the zoom level has changed enough to warrant a change in which nodes we are displaying.\n  nodeLevelChange(): boolean {\n    const currentIndex: number = this.getZoomIndex(this.nodesConfig);\n    if (currentIndex === this.nodeZoomIndex) {\n      return false;\n    }\n    this.nodeZoomIndex = currentIndex;\n    return true;\n  }\n\n  // Returns whether or not the zoom level has changed enough to warrant a change in which edges we are displaying.\n  edgeLevelChange(): boolean {\n    const currentIndex: number = this.getZoomIndex(this.edgesConfig);\n    if (currentIndex === this.edgeZoomIndex) {\n      return false;\n    }\n    this.edgeZoomIndex = currentIndex;\n    return true;\n  }\n\n  addEdgeHover(map: Map): void {\n    map.on('mousemove', 'edges', (e) => {\n        // When the mouse moves, check if the mouse is on top of a feature from the edges source.\n        if (!e.features) {\n          return;\n        }\n\n        if (e.features.length > 0) {\n            // If there was already an edge with the hover status, turn that hover status off first\n            if (this.hoverEdgeID) {\n                map.setFeatureState(\n                    { source: 'edges', id: this.hoverEdgeID },\n                    { hover: false }\n                );\n            }\n            // Set the hover status of the new edge to true, and save the ID to the object so we can compare\n            // later, when the mouse moves again.\n            this.hoverEdgeID = e.features[0].id;\n            map.setFeatureState(\n                { source: 'edges', id: this.hoverEdgeID },\n                { hover: true }\n            );\n        }\n    });\n\n    map.on('mouseleave', 'edges', () => {\n        // When the mouse leaves the edge source features, turn the hover status off\n        if (this.hoverEdgeID) {\n            map.setFeatureState(\n                { source: 'edges', id: this.hoverEdgeID },\n                { hover: false }\n            );\n        }\n        this.hoverEdgeID = undefined;\n    });\n  }\n\n  addNodeHover(map: Map): void {\n    map.on('mousemove', 'nodes', (e) => {\n      if (!e.features) {\n        return;\n      }\n\n      // When the mouse moves, check if the mouse is on top of a feature from the nodes source.\n      if (e.features.length > 0) {\n          // If there was already an node with the hover status, turn that hover status off first\n          if (this.hoverNodeID) {\n              map.setFeatureState(\n                  { source: 'nodes', id: this.hoverNodeID },\n                  { hover: false }\n              );\n          }\n          // Set the hover status of the new node to true, and save the ID to the object so we can compare\n          // later, when the mouse moves again.\n          this.hoverNodeID = e.features[0].id;\n          map.setFeatureState(\n              { source: 'nodes', id: this.hoverNodeID },\n              { hover: true }\n          );\n      }\n    });\n\n    map.on('mouseleave', 'nodes', () => {\n        // When the mouse leaves the edge source features, turn the hover status off\n        if (this.hoverNodeID) {\n            map.setFeatureState(\n                { source: 'nodes', id: this.hoverNodeID },\n                { hover: false }\n            );\n        }\n        this.hoverNodeID = undefined;\n    });\n  }\n\n  addPopups(): void {\n    this.popups.forEach(popup => {\n        this.addPopupOnClick(popup.layer, popup.content);\n    });\n  }\n\n  addPopupOnClick(layer: string, content: PopupContent): void {\n    const { map } = this;\n    // When a click event occurs on a feature in the places layer, open a popup at the\n    // location of the feature, with description HTML from its properties.\n    map.on('click', layer, (e) => {\n      if (!e.features) {\n        return;\n      }\n\n      const descriptionHTML = this.createPopupHTML(e.features[0].properties, content);\n      new Popup({\n        closeOnClick: true,\n        closeOnMove: true,\n        closeButton: false,\n        className: 'map-marker-popup'\n      })\n        .setLngLat(e.lngLat)\n        .setHTML(descriptionHTML)\n        .addTo(map);\n    });\n\n    // Change the cursor to a pointer when the mouse is over the places layer.\n    map.on('mouseenter', layer, () => {\n        map.getCanvas().style.cursor = 'pointer';\n    });\n\n    // Change it back to a pointer when it leaves.\n    map.on('mouseleave', layer, () => {\n        map.getCanvas().style.cursor = '';\n    });\n  }\n\n  // Takes the description field of the element, and uses it with the popup content defined in the config object\n  // to return the concatenated html string.\n  createPopupHTML(description: Any, content: PopupContent): string {\n    let html = '';\n    content.forEach((element, index: number) => {\n        if (!element) {\n          return;\n        }\n        // The config object for popups is structued like ['<html>', 'propertyName', '</html>]\n        // so on even indexes, we just concatenate the html string, on odd indexes we use the string to lookup the property value.\n        if (this.isEven(index)) {\n          html += element;\n        }\n\n        // Along with property values, you can pass along a formatting function in form of ['propertyName', function]\n        // This checks if there is one, if there is it uses that function to format the value of the property before\n        // concatenating it.\n        else if (typeof (element) === 'string'){\n          html += description[element];\n        } else {\n          html += element[1](description[element[0]]);\n        }\n    });\n\n    return html;\n  }\n\n  // Converts the current zoom number, to the index number of the object with the same .zoom property in the lookup array passed in.\n  // Used because getZoom() will return very precise values, and the nodes / edges config objects will not match up exactly.\n  getZoomIndex(zoomLookup: ZoomLookup): number {\n    const zoom: number = this.map.getZoom();\n    for (let index = 0; index <= zoomLookup.length; index++) {\n      if (index === (zoomLookup.length - 1)) {\n        return index;\n      }\n      if (zoom >= zoomLookup[index].zoom && zoom < zoomLookup[index + 1].zoom) {\n        return index;\n      }\n    }\n\n    console.error('No Zoom index found.  Zoom lookup: ', zoomLookup);\n    return 0;\n  }\n\n  isEven(index: number): boolean {\n    return index % 2 === 0;\n  }\n}\n","<mgl-map\n  [style]=\"mapStyle\"\n  [zoom]=\"[currentZoom]\"\n  [center]=\"mapCenterConfig\"\n  (mapLoad)=\"onMapLoad($event)\"\n  [renderWorldCopies]=\"false\"\n>\n  <mgl-geojson-source\n    id=\"edges\"\n    [data]=\"edgeFeatures\"\n  ></mgl-geojson-source>\n  <mgl-geojson-source\n    id=\"nodes\"\n    [data]=\"nodeFeatures\"\n  ></mgl-geojson-source>\n  <mgl-geojson-source\n    id=\"clusters\"\n    [data]=\"clusterFeatures\"\n  ></mgl-geojson-source>\n  <mgl-geojson-source\n    id=\"boundaries\"\n    [data]=\"boundaryFeatures\"\n  ></mgl-geojson-source>\n\n  <!-- CLUSTERS -->\n  <mgl-layer\n    id=\"clusters\"\n    source=\"clusters\"\n    type=\"fill\"\n    [paint]=\"{\n      'fill-color': ['get', 'fill'],\n      'fill-opacity': 0.7,\n      'fill-outline-color': ['get', 'stroke']\n    }\">\n  </mgl-layer>\n\n  <!-- BOUNDARIES -->\n  <mgl-layer\n    id=\"boundaries\"\n    source=\"boundaries\"\n    type=\"line\"\n    minZoom=\"2\"\n    [paint]=\"{\n      'line-color': ['get', 'stroke'],\n      'line-width': 0.5,\n      'line-opacity': 0.8\n    }\"\n  ></mgl-layer>\n\n  <!-- EDGES -->\n  <mgl-layer\n    id=\"edges\"\n    source=\"edges\"\n    type=\"line\"\n    [paint]=\"{\n      'line-color': ['case',\n          ['boolean', ['feature-state', 'hover'], false], 'red',\n          ['get', 'color', edgeFormula]\n      ],\n      'line-width': ['get', 'width', edgeFormula],\n      'line-opacity': ['get', 'opacity', edgeFormula]\n    }\"\n    [filter]=\"['>=', currentZoom, ['get', 'zoom', edgeFormula]]\"\n    (layerClick)=\"edgeClicked($event)\">\n  </mgl-layer>\n\n  <!-- EDGES BORDER -->\n  <mgl-layer\n    id=\"edges_border\"\n    source=\"edges\"\n    type=\"line\"\n    [paint]=\"{\n      'line-color': ['get', 'borderColor', edgeFormula],\n      'line-width': ['get', 'borderWidth', edgeFormula],\n      'line-opacity': ['get', 'borderOpacity', edgeFormula],\n      'line-gap-width': ['get', 'width', edgeFormula]\n    }\"\n    [filter]=\"['>=', currentZoom, ['get', 'zoom', edgeFormula]]\">\n  </mgl-layer>\n\n  <!-- NODES -->\n  <mgl-layer\n    id=\"nodes\"\n    source=\"nodes\"\n    type=\"circle\"\n    [paint]=\"{\n      'circle-color': ['case',\n          ['boolean', ['feature-state', 'hover'], false], 'red',\n          'black'\n      ],\n      'circle-radius': 3\n    }\"\n    [filter]=\"['>=', currentZoom, currentEdgeFormula]\"\n    (layerClick)=\"nodeClicked($event)\">\n  </mgl-layer>\n\n  <!-- NODE LABELS -->\n  <mgl-layer\n    id=\"node_labels\"\n    source=\"nodes\"\n    type=\"symbol\"\n    [layout]=\"nodeLabelsLayout\"\n    [filter]=\"['>=', currentZoom, ['get', 'zoom', currentNodeFormula]]\">\n  </mgl-layer>\n</mgl-map>","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}