{"version":3,"file":"main.js","mappings":"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","sources":["./projects/map4sci/src/app/app-routing.module.ts","./projects/map4sci/src/app/app.component.ts","./projects/map4sci/src/app/app.component.html","./projects/map4sci/src/app/app.module.ts","./projects/map4sci/src/app/core/components/analytics-consent/analytics-consent.component.ts","./projects/map4sci/src/app/core/components/analytics-consent/analytics-consent.component.html","./projects/map4sci/src/app/core/components/analytics-consent/analytics-consent.module.ts","./projects/map4sci/src/app/core/components/footer/footer.component.ts","./projects/map4sci/src/app/core/components/footer/footer.component.html","./projects/map4sci/src/app/core/components/footer/footer.module.ts","./projects/map4sci/src/app/core/components/header/header.component.ts","./projects/map4sci/src/app/core/components/header/header.component.html","./projects/map4sci/src/app/core/components/header/header.module.ts","./projects/map4sci/src/app/core/components/menu/menu.component.ts","./projects/map4sci/src/app/core/components/menu/menu.component.html","./projects/map4sci/src/app/core/components/menu/menu.module.ts","./projects/map4sci/src/app/core/core.module.ts","./projects/map4sci/src/app/core/services/analytics-consent/analytics-consent.service.ts","./projects/map4sci/src/app/core/services/site-configuration/site-configuration.module.ts","./projects/map4sci/src/app/core/services/site-configuration/site-configuration.service.ts","./projects/map4sci/src/app/map/map-defaults.ts","./projects/map4sci/src/app/map/map.component.ts","./projects/map4sci/src/app/map/map.component.html","./projects/map4sci/src/app/map/map.module.ts","./projects/map4sci/src/app/map/map.ts","./projects/map4sci/src/app/map/minimap.ts","./projects/map4sci/src/app/map/zoom-level.control.ts","./projects/map4sci/src/app/pages/home/home-routing.module.ts","./projects/map4sci/src/app/pages/home/home.component.ts","./projects/map4sci/src/app/pages/home/home.component.html","./projects/map4sci/src/app/pages/home/home.module.ts","./projects/map4sci/src/app/pages/visualizer/visualizer-routing.module.ts","./projects/map4sci/src/app/pages/visualizer/visualizer.component.ts","./projects/map4sci/src/app/pages/visualizer/visualizer.component.html","./projects/map4sci/src/app/pages/visualizer/visualizer.module.ts","./projects/map4sci/src/app/services/map-data.service.ts","./projects/map4sci/src/app/shared/components/base-modal/base-modal.component.ts","./projects/map4sci/src/app/shared/components/base-modal/base-modal.module.ts","./projects/map4sci/src/app/shared/components/base-popup/base-popup.component.ts","./projects/map4sci/src/app/shared/components/base-popup/base-popup.module.ts","./projects/map4sci/src/app/shared/components/markdown-modal/markdown-modal.component.ts","./projects/map4sci/src/app/shared/components/markdown-modal/markdown-modal.component.html","./projects/map4sci/src/app/shared/components/markdown-modal/markdown-modal.module.ts","./projects/map4sci/src/environments/environment.shared.ts","./projects/map4sci/src/environments/environment.ts","./projects/map4sci/src/main.ts","./projects/map4sci/$_lazy_route_resources|lazy|groupOptions: {}|namespace object"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { HomeModule } from './pages/home/home.module';\nimport { VisualizerModule } from './pages/visualizer/visualizer.module';\n\n\nconst routes: Routes = [\n  { path: '', pathMatch: 'full', redirectTo: 'home' },\n  { path: 'home', loadChildren: () => HomeModule },\n  { path: 'visualizer', loadChildren: () => VisualizerModule }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { ChangeDetectionStrategy, Component, HostBinding, OnInit } from '@angular/core';\n\nimport { AnalyticsConsentComponent } from './core/components/analytics-consent/analytics-consent.component';\nimport { AnalyticsConsentService } from './core/services/analytics-consent/analytics-consent.service';\n\n\n@Component({\n  selector: 'm4s-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AppComponent implements OnInit {\n  @HostBinding('class') readonly clsName = 'm4s-root';\n\n  constructor(private readonly consentService: AnalyticsConsentService) { }\n\n  ngOnInit(): void {\n    this.openTrackingPopup();\n  }\n\n  openTrackingPopup(): void {\n    AnalyticsConsentComponent.open(undefined, {\n      duration: this.consentService.hasUserSetConsent ? 3000 : Infinity\n    });\n  }\n}\n","<m4s-header></m4s-header>\n\n<div class=\"content-container\">\n  <div class=\"content\">\n    <div class=\"outlet-wrapper\">\n      <router-outlet>\n      </router-outlet>\n    </div>\n  </div>\n\n  <m4s-footer></m4s-footer>\n</div>\n","import { HttpClient, HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { MarkdownModule, MarkedOptions } from 'ngx-markdown';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { CoreModule } from './core/core.module';\nimport { MapModule } from './map/map.module';\nimport { MapDataService } from './services/map-data.service';\nimport { MarkdownModalModule } from './shared/components/markdown-modal/markdown-modal.module';\n\n\n@NgModule({\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    MapModule,\n    HttpClientModule,\n    AppRoutingModule,\n    CoreModule,\n    MarkdownModule.forRoot({\n      loader: HttpClient,\n      markedOptions: {\n        provide: MarkedOptions,\n        useValue: {\n          gfm: true\n        }\n      }\n    }),\n    MarkdownModalModule,\n    MatSnackBarModule\n  ],\n  providers: [MapDataService],\n  declarations: [AppComponent],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, HostBinding, Inject, OnDestroy } from '@angular/core';\nimport { MatSnackBarRef, MAT_SNACK_BAR_DATA } from '@angular/material/snack-bar';\nimport { Subscription } from 'rxjs';\nimport { delay } from 'rxjs/operators';\n\nimport { BasePopupComponent } from '../../../shared/components/base-popup/base-popup.component';\nimport { AnalyticsConsentService } from '../../services/analytics-consent/analytics-consent.service';\n\n\nexport interface AnalyticsConsentComponentData {\n  dismissable?: boolean;\n}\n\n\n@Component({\n  selector: 'm4s-analytics-consent',\n  templateUrl: './analytics-consent.component.html',\n  styleUrls: ['./analytics-consent.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AnalyticsConsentComponent extends BasePopupComponent implements OnDestroy {\n  static readonly DEFAULT_DATA: AnalyticsConsentComponentData = { dismissable: false };\n\n  @HostBinding('class') readonly clsName = 'm4s-analytics-consent-popup';\n\n  readonly dismissable: boolean;\n  showGiveConsent = false;\n  showRescindConsent = false;\n\n  private readonly subscriptions = new Subscription();\n\n  constructor(\n    private readonly ref: MatSnackBarRef<AnalyticsConsentComponent>,\n    private readonly consentService: AnalyticsConsentService,\n    @Inject(MAT_SNACK_BAR_DATA) data: AnalyticsConsentComponentData,\n    cdr: ChangeDetectorRef\n  ) {\n    super();\n\n    this.dismissable = data.dismissable ?? false;\n    this.updateShownButtons();\n\n    this.subscriptions.add(consentService.consentChanged.pipe(\n      delay(50)\n    ).subscribe(() => {\n      this.updateShownButtons();\n      cdr.markForCheck();\n    }));\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  dismiss(): void {\n    this.ref.dismiss();\n  }\n\n  setConsent(consentGiven: boolean): void {\n    this.consentService.setConsent(consentGiven);\n    this.dismiss();\n  }\n\n  private updateShownButtons(): void {\n    const { consentService: { hasConsent, hasUserSetConsent } } = this;\n    this.showGiveConsent = !hasUserSetConsent || !hasConsent;\n    this.showRescindConsent = !hasUserSetConsent || hasConsent;\n  }\n}\n","<p>We log usage to improve this service.</p>\n<button *ngIf=\"showGiveConsent\" mat-button color=\"basic\" (click)=\"setConsent(true)\">I understand</button>\n<button *ngIf=\"showRescindConsent\" mat-button color=\"basic\" (click)=\"setConsent(false)\">Opt out</button>\n<button *ngIf=\"dismissable\" mat-button color=\"basic\" (click)=\"dismiss()\">Dismiss</button>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\n\nimport { AnalyticsConsentComponent } from './analytics-consent.component';\n\n\n@NgModule({\n  imports: [CommonModule, MatButtonModule],\n  declarations: [AnalyticsConsentComponent],\n  exports: [AnalyticsConsentComponent]\n})\nexport class AnalyticsConsentModule { }\n","import { ChangeDetectionStrategy, Component, HostBinding, OnDestroy } from '@angular/core';\nimport { MatSnackBarRef } from '@angular/material/snack-bar';\nimport { take } from 'rxjs/operators';\n\nimport { MarkdownModalComponent } from '../../../shared/components/markdown-modal/markdown-modal.component';\nimport { SiteConfigurationService } from '../../services/site-configuration/site-configuration.service';\nimport { AnalyticsConsentComponent } from '../analytics-consent/analytics-consent.component';\n\n\n/**\n * Footer configuration.\n */\nexport interface FooterConfig {\n  /** Copyright text. */\n  copyright?: string;\n  /** Url to terms of service markdown. */\n  'terms-of-service'?: string;\n  /** Url to privacy policy markdown. */\n  'privacy-policy'?: string;\n}\n\n/**\n * Partial site configuration containing the footer configuration.\n */\nexport interface SiteConfigurationWithFooterConfig {\n  /** Optional footer configuration. */\n  footer?: FooterConfig;\n}\n\n\n/**\n * Page footer component.\n */\n@Component({\n  selector: 'm4s-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['./footer.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FooterComponent implements OnDestroy {\n  /** Component css selector. */\n  @HostBinding('class') readonly clsName = 'm4s-footer';\n\n  /** Copyright text. */\n  readonly copyright: string;\n  /** Terms of service markdown url. */\n  readonly termsOfService: string | undefined;\n  /** Privacy policy markdown url. */\n  readonly privacyPolicy: string | undefined;\n\n  /** Currently active analytics consent popup. */\n  private consentPopup?: MatSnackBarRef<AnalyticsConsentComponent>;\n\n  /**\n   * Creates an instance of footer component.\n   *\n   * @param siteConfig The loaded site configuration.\n   */\n  constructor(siteConfig: SiteConfigurationService<SiteConfigurationWithFooterConfig>) {\n    const {\n      copyright = '',\n      'terms-of-service': termsOfService,\n      'privacy-policy': privacyPolicy\n    } = siteConfig.get('footer') ?? {};\n\n    this.copyright = copyright;\n    this.termsOfService = termsOfService;\n    this.privacyPolicy = privacyPolicy;\n  }\n\n  /**\n   * Cleans up after this component.\n   */\n  ngOnDestroy(): void {\n    this.dismissAnalyticsConsentPopup();\n  }\n\n  /**\n   * Opens the terms of service modal.\n   */\n  openTermsOfService(): void {\n    MarkdownModalComponent.open({\n      title: 'Terms & Conditions',\n      src: this.termsOfService!\n    }, {\n      width: '800px',\n      height: '600px'\n    });\n  }\n\n  /**\n   * Opens the privacy policy modal.\n   */\n  openPrivacyPolicy(): void {\n    MarkdownModalComponent.open({\n      title: 'Privacy Policy',\n      src: this.privacyPolicy\n    }, {\n      width: '800px',\n      height: '600px'\n    });\n  }\n\n  /**\n   * Toggles the analytics opt in/out popup.\n   */\n  toggleAnalyticsConsent(): void {\n    if (this.consentPopup) {\n      this.dismissAnalyticsConsentPopup();\n    } else {\n      this.consentPopup = AnalyticsConsentComponent.open({\n        dismissable: true\n      });\n\n      this.consentPopup.afterDismissed().pipe(take(1)).subscribe(() => {\n        this.consentPopup = undefined;\n      });\n    }\n  }\n\n  /**\n   * Closes the analytics consent popup if open.\n   */\n  private dismissAnalyticsConsentPopup(): void {\n    this.consentPopup?.dismiss?.();\n    this.consentPopup = undefined;\n  }\n}\n","<div class=\"container\">\n  <span class=\"copyright\">{{ copyright }}</span>\n\n  <div class=\"filler\"></div>\n\n  <ng-container *ngIf=\"termsOfService\">\n    <button mat-button class=\"tos\" disableRipple (click)=\"openTermsOfService()\">Terms of Use</button>\n    <div class=\"divider\"></div>\n  </ng-container>\n\n  <ng-container *ngIf=\"privacyPolicy\">\n    <button mat-button class=\"privacy\" disableRipple (click)=\"openPrivacyPolicy()\">Privacy Policy</button>\n    <div class=\"divider\"></div>\n  </ng-container>\n\n  <button mat-button class=\"analytics\" disableRipple (click)=\"toggleAnalyticsConsent()\">Opt In/Out</button>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\n\nimport { MarkdownModalModule } from '../../../shared/components/markdown-modal/markdown-modal.module';\nimport { AnalyticsConsentModule } from '../analytics-consent/analytics-consent.module';\nimport { FooterComponent } from './footer.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n\n    MatButtonModule,\n\n    AnalyticsConsentModule,\n    MarkdownModalModule\n  ],\n  declarations: [FooterComponent],\n  exports: [FooterComponent]\n})\nexport class FooterModule { }\n","import { ChangeDetectionStrategy, Component, HostBinding } from '@angular/core';\n\nimport { SiteConfigurationService } from '../../services/site-configuration/site-configuration.service';\n\n\n/**\n * Logo configuration.\n */\nexport interface LogoConfig {\n  /** Whether to put the icon or text first. */\n  layout?: 'icon-first' | 'label-first';\n  /** Url for an icon. */\n  icon?: string;\n  /** Logo label. */\n  label?: string;\n  /** External link. */\n  'link-to'?: string;\n}\n\n/**\n * Header configuration.\n */\nexport interface HeaderConfig {\n  logo?: LogoConfig;\n}\n\n/**\n * Partial site configuration containing the header configuration.\n */\nexport interface SiteConfigurationWithHeaderConfig {\n  header?: HeaderConfig;\n}\n\n\n/**\n * Page header component.\n */\n@Component({\n  selector: 'm4s-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class HeaderComponent {\n  /** Component css selector. */\n  @HostBinding('class') readonly clsName = 'm4s-header';\n\n  /** Whether to reverse the content of the logo so that the label is put first. */\n  readonly reverseLogoLayout: boolean;\n  /** Logo icon url. */\n  readonly logoIcon: string | undefined;\n  /** Logo label text. */\n  readonly logoLabel: string;\n  /** External link to open on logo click. */\n  readonly logoLink: string;\n\n  /**\n   * Creates an instance of header component.\n   *\n   * @param siteConfig The loaded site configuration.\n   */\n  constructor(siteConfig: SiteConfigurationService<SiteConfigurationWithHeaderConfig>) {\n    const { layout, icon, label = '', 'link-to': linkTo = '' } = siteConfig.get('header', 'logo') ?? {};\n\n    this.reverseLogoLayout = layout?.toLowerCase?.() === 'label-first';\n    this.logoIcon = icon;\n    this.logoLabel = label;\n    this.logoLink = linkTo;\n  }\n}\n","<div class=\"container\">\n  <div class=\"logo\" [class.reverse-layout]=\"reverseLogoLayout\">\n    <a *ngIf=\"logoLink; else: logoRouterLink\" [href]=\"logoLink\" target=\"_blank\" rel=\"noreferrer noopener\">\n      <ng-container *ngTemplateOutlet=\"logoContent\"></ng-container>\n    </a>\n    <ng-template #logoRouterLink>\n      <a routerLink=\"/home\">\n        <ng-container *ngTemplateOutlet=\"logoContent\"></ng-container>\n      </a>\n    </ng-template>\n\n    <ng-template #logoContent>\n      <img *ngIf=\"logoIcon\" class=\"icon\" [src]=\"logoIcon\" alt=\"Application Logo\">\n      <span class=\"label\">{{ logoLabel }}</span>\n    </ng-template>\n  </div>\n\n  <div class=\"filler\"></div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\n\nimport { HeaderComponent } from './header.component';\n\n\n@NgModule({\n  imports: [CommonModule, RouterModule],\n  declarations: [HeaderComponent],\n  exports: [HeaderComponent]\n})\nexport class HeaderModule { }\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\n\n@Component({\n  selector: 'm4s-menu',\n  templateUrl: './menu.component.html',\n  styleUrls: ['./menu.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MenuComponent { }\n","<p>menu works!</p>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { MenuComponent } from './menu.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [MenuComponent]\n})\nexport class MenuModule { }\n","import { NgModule, Optional, SkipSelf } from '@angular/core';\nimport { NgxGoogleAnalyticsModule, NgxGoogleAnalyticsRouterModule } from 'ngx-google-analytics';\n\nimport { environment } from '../../environments/environment';\nimport { BaseModalModule } from '../shared/components/base-modal/base-modal.module';\nimport { BasePopupModule } from '../shared/components/base-popup/base-popup.module';\nimport { AnalyticsConsentModule } from './components/analytics-consent/analytics-consent.module';\nimport { FooterModule } from './components/footer/footer.module';\nimport { HeaderModule } from './components/header/header.module';\nimport { MenuModule } from './components/menu/menu.module';\nimport { SiteConfigurationModule } from './services/site-configuration/site-configuration.module';\n\n\n@NgModule({\n  imports: [\n    // Non-core imports\n    NgxGoogleAnalyticsModule.forRoot(environment.googleAnalyticsToken, [\n      { command: 'set', values: [{ app: 'm4s' }] }\n    ]),\n    NgxGoogleAnalyticsRouterModule.forRoot(),\n\n    BaseModalModule.forRoot(),\n    BasePopupModule.forRoot(),\n\n    // Services\n    SiteConfigurationModule.forRoot(environment.siteConfigurationUrl),\n\n    // Components\n    AnalyticsConsentModule,\n    FooterModule,\n    HeaderModule,\n    MenuModule\n  ],\n  exports: [\n    // Module forwarding\n    AnalyticsConsentModule,\n    FooterModule,\n    HeaderModule,\n    MenuModule\n  ]\n})\nexport class CoreModule {\n  constructor(@Optional() @SkipSelf() other: CoreModule | null) {\n    if (other) {\n      throw new Error('CoreModule should only be imported once in the AppModule!');\n    }\n  }\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { IGoogleAnalyticsSettings, NGX_GOOGLE_ANALYTICS_SETTINGS_TOKEN, NGX_WINDOW } from 'ngx-google-analytics';\nimport { ReplaySubject } from 'rxjs';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnalyticsConsentService {\n  static readonly LOCAL_STORAGE_CONSENT_KEY = 'ALLOW_TELEMETRY';\n\n  readonly consentChanged = new ReplaySubject<boolean>(1);\n\n  private readonly gaTrackingCode: string;\n  private consentGiven = this.loadConsentFromLocalStorage();\n\n  get hasConsent(): boolean {\n    return this.consentGiven !== false;\n  }\n\n  get hasUserSetConsent(): boolean {\n    return this.consentGiven !== undefined;\n  }\n\n  constructor(\n    @Inject(NGX_WINDOW) private readonly window: Record<string, boolean> | null,\n    @Inject(NGX_GOOGLE_ANALYTICS_SETTINGS_TOKEN) { trackingCode }: IGoogleAnalyticsSettings\n  ) {\n    this.gaTrackingCode = trackingCode;\n    this.disableGoogleTracking(!this.hasConsent);\n    this.consentChanged.next(this.hasConsent);\n  }\n\n  setConsent(consentGiven: boolean): void {\n    this.consentGiven = consentGiven;\n    this.saveConsentInLocalStorage(consentGiven);\n    this.disableGoogleTracking(!consentGiven);\n    this.consentChanged.next(consentGiven);\n  }\n\n  private loadConsentFromLocalStorage(): boolean | undefined {\n    const storageValue = localStorage.getItem(AnalyticsConsentService.LOCAL_STORAGE_CONSENT_KEY);\n    return storageValue == null ? undefined : storageValue.toLowerCase() === 'true';\n  }\n\n  private saveConsentInLocalStorage(consentGiven: boolean): void {\n    localStorage.setItem(\n      AnalyticsConsentService.LOCAL_STORAGE_CONSENT_KEY,\n      `${consentGiven}`\n    );\n  }\n\n  private disableGoogleTracking(disabled = true): void {\n    if (this.window) {\n      this.window[`ga-disable-${this.gaTrackingCode}`] = disabled;\n    }\n  }\n}\n","import { APP_INITIALIZER, ModuleWithProviders, NgModule } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { SITE_CONFIGURATION_URL, SiteConfigurationService } from './site-configuration.service';\n\n\n/**\n * Factory function for initializing site configuration.\n *\n * @param config Configuration service.\n * @param url Url to load configuration from.\n * @returns An initialization function.\n */\nfunction initializeSiteConfigurationFactory(\n  config: SiteConfigurationService,\n  url: string\n): () => Observable<unknown> {\n  return () => config.loadYaml(url);\n}\n\n\n@NgModule()\nexport class SiteConfigurationModule {\n  /**\n   * Configures the site configuration loading.\n   *\n   * @param url Url of site configuration.\n   * @returns This module with the necessary providers.\n   */\n  static forRoot(url: string): ModuleWithProviders<SiteConfigurationModule> {\n    return {\n      ngModule: SiteConfigurationModule,\n      providers: [\n        {\n          provide: SITE_CONFIGURATION_URL,\n          useValue: url\n        },\n        {\n          provide: APP_INITIALIZER,\n          useFactory: initializeSiteConfigurationFactory,\n          deps: [SiteConfigurationService, SITE_CONFIGURATION_URL],\n          multi: true\n        }\n      ]\n    };\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable, InjectionToken } from '@angular/core';\nimport { load } from 'js-yaml';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n\n/**\n * Type for any non-primitive object.\n */\n// eslint-disable-next-line @typescript-eslint/ban-types -- Any non-primitive object\ntype NonPrimitive = object;\n\n\n// Complicated types for deep property access\n// Adapted from https://catchts.com/deep-pick\n// ------------------------------------------\n\n/**\n * Constructs all possible deep property paths for an object.\n *\n * @template T The object type.\n *\n * @example\n * // A = ['a'] | ['a', 'b']\n * type Foo = { a: { b: string } };\n * type A = KeyPaths<Foo>;\n */\nexport type KeyPaths<T, Paths extends PropertyKey[] = []> =\n  T extends PropertyKey ? Paths : ({\n    [P in keyof T]: [...Paths, P] | KeyPaths<T[P], [...Paths, P]>\n  }[keyof T]);\n\n/**\n * Determines the type of value at the specified deep property path.\n *\n * @template T The object type.\n * @template Path The deep path to access.\n *\n * @example\n * // A = { b: string }\n * type Foo = { a: { b: string } };\n * type A = ValueForKeyPath<Foo, ['a']>;\n */\nexport type ValueForKeyPath<T, Path extends readonly PropertyKey[]> =\n  // Remove inner nulls and undefineds and put it on the outer result\n  T extends null | undefined ? (\n    ValueForKeyPath<NonNullable<T>, Path> | undefined\n  ) : (\n    // Base case - no more keys\n    Path extends [] ? T : (\n      // Base case - single key\n      Path extends [infer K] ? (\n        K extends keyof T ? T[K] : never\n      ) : (\n        // Recursion case\n        Path extends [infer K, ...infer Rest] ? (\n          Rest extends readonly PropertyKey[] ? (\n            K extends keyof T ? (\n              ValueForKeyPath<T[K], Rest>\n            ) : never\n          ): never\n        ) : never\n      )\n    )\n  );\n\n\n/**\n * Injection token for the url of the site configuration file.\n */\nexport const SITE_CONFIGURATION_URL = new InjectionToken<string>('URL for site configuration');\n\n\n/**\n * Provides access to site configuration loaded during app initialization.\n *\n * @template T Optional type useful for specifiying the entire or parts of the configuration's shape.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class SiteConfigurationService<T extends NonPrimitive = Record<string, unknown>> {\n  /** Loaded site configuration. */\n  private configuration: Record<string, unknown> = {};\n\n  /**\n   * Creates an instance of site configuration service.\n   *\n   * @param http Service used to load configuration yaml files.\n   */\n  constructor(private readonly http: HttpClient) { }\n\n  /**\n   * Retrieves a value from the configuration.\n   *\n   * @param keys A deep property path.\n   * @returns The value or undefined if any object along the path did not exist.\n   */\n  get<Paths extends KeyPaths<T> & readonly PropertyKey[]>(...keys: Paths): ValueForKeyPath<T, Paths>;\n\n  /**\n   * Retrieves a value from the configuration.\n   * This is the general fallback case.\n   *\n   * @template U Optional type to cast result to. It is the user's responsibility to ensure this is correct.\n   *\n   * @param keys A deep property path.\n   * @returns The value or undefined if any object along the path did not exist.\n   */\n  get<U = unknown>(...keys: string[]): U | undefined;\n\n  get(...keys: string[]): unknown {\n    return keys.reduce<Record<string, unknown> | undefined>(\n      (obj, key) => obj?.[key] as Record<string, unknown>,\n      this.configuration\n    );\n  }\n\n  /**\n   * Fetches the entire site configuration object.\n   *\n   * @returns The site configuration.\n   */\n  getConfigObject(): T {\n    return this.configuration as T;\n  }\n\n  /**\n   * Loads and sets the site configuration from a yaml file loaded from an url.\n   *\n   * @param url Url of the yaml file.\n   * @returns Observable of the loaded and parsed yaml.\n   */\n  loadYaml(url: string): Observable<Record<string, unknown>> {\n    return this.http.get(url, { responseType: 'text' }).pipe(\n      map(rawYaml => this.parseAndSetConfig(rawYaml, url))\n    );\n  }\n\n  /**\n   * Parses the yaml and sets it as the new configuration.\n   *\n   * @param rawYaml Raw yaml text.\n   * @param url Url from which the yaml was loaded.\n   * @returns The parsed yaml.\n   */\n  private parseAndSetConfig(rawYaml: string, url: string): Record<string, unknown> {\n    const yaml = load(rawYaml, { filename: url }) as Record<string, unknown> ?? {};\n\n    if (typeof yaml !== 'object') {\n      const message = `Expected site configuration to be an object, got: ${yaml}`;\n      throw new Error(message);\n    }\n\n    this.configuration = yaml;\n    return yaml;\n  }\n}\n","import { Style } from 'maplibre-gl';\n\nimport { Edge, MiniMapOptions, Node } from './map';\n\n\nexport const defaultInitialZoom = 2;\nexport const blankStyle: Style = {\n  version: 8,\n  name: 'Blank',\n  center: [0, 0],\n  zoom: defaultInitialZoom,\n  sources: {},\n  sprite: 'https://cdn.jsdelivr.net/gh/lukasmartinelli/osm-liberty@gh-pages/sprites/osm-liberty',\n  glyphs: 'https://cdn.jsdelivr.net/gh/orangemug/font-glyphs@gh-pages/glyphs/{fontstack}/{range}.pbf',\n  layers: [\n    {\n      id: 'background',\n      type: 'background',\n      paint: {\n        'background-color': 'white'\n      }\n    }\n  ]\n};\nexport const defaultMinimapOptions: MiniMapOptions = {\n  id: 'maplibregl-minimap',\n  width: '320px',\n  height: '180px',\n  style: blankStyle,\n  center: [0, 0],\n  zoom: 0,\n\n  containerStyles: `\n    border: 1px solid lightgray;\n    border-radius: 5px;\n    -webkit-box-shadow: 3px 3px 5px 4px #00000021;\n    -moz-box-shadow: 3px 3px 5px 4px #00000021;\n    box-shadow: 3px 3px 5px 4px #00000021;\n  `,\n\n  // should be a function; will be bound to Minimap\n  zoomAdjust: null,\n\n  // [a, b, c]\n  // if parent map zoom >= a, and minimap zoom >= b, set minimap zoom to c\n  // must be defined from most zoomed in rule, to least zoomed in rule.\n  zoomLevels: [\n    [9, 3, 4],\n    [8, 2, 3],\n    [6, 0, 2]\n  ],\n\n  edgeColor: '#08F',\n  edgeWidth: 1,\n  edgeOpacity: 1,\n\n  fillColor: '#F80',\n  fillOpacity: 0.25,\n\n  dragPan: false,\n  scrollZoom: false,\n  boxZoom: false,\n  dragRotate: false,\n  keyboard: false,\n  doubleClickZoom: false,\n  touchZoomRotate: false\n};\nexport const defaultNodes: Node[] = [\n  { level: 0, zoom: 0.0, fontSize: 0 },\n  { level: 1, zoom: 0.0, fontSize: 20 },\n  { level: 2, zoom: 4.0, fontSize: 18 },\n  { level: 3, zoom: 5.0, fontSize: 18 },\n  { level: 4, zoom: 5.5, fontSize: 16 },\n  { level: 5, zoom: 6.0, fontSize: 16 },\n  { level: 6, zoom: 6.2, fontSize: 14 },\n  { level: 7, zoom: 6.5, fontSize: 14 },\n  { level: 8, zoom: 6.7, fontSize: 12 },\n  { level: 9, zoom: 7.5, fontSize: 12 }\n];\nexport const defaultEdges: Edge[] = [\n  { level: 0, zoom: 0, color: '', width: 0, opacity: 0.0, borderOpacity: 0.0, borderColor: '', borderWidth: 0 },\n  { level: 1, zoom: 1.5, color: '#FFEBA1', width: 3.2, opacity: 1.0, borderOpacity: 1.0, borderColor: 'yellow', borderWidth: 1.2 },\n  { level: 2, zoom: 3.5, color: '#FFEBA1', width: 3, opacity: 1.0, borderOpacity: 1.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 3, zoom: 4.5, color: '#F9D776', width: 2.7, opacity: 0.9, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 4, zoom: 5.0, color: '#c1b276', width: 2.7, opacity: 0.9, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 5, zoom: 5.4, color: '#94895f', width: 2.2, opacity: 0.8, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 6, zoom: 5.7, color: '#615b43', width: 2.2, opacity: 0.8, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 7, zoom: 6.0, color: 'gray', width: 2, opacity: 0.7, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 8, zoom: 6.2, color: 'gray', width: 2, opacity: 0.6, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 },\n  { level: 9, zoom: 7.0, color: 'gray', width: 1, opacity: 0.5, borderOpacity: 0.0, borderColor: '#F9D776', borderWidth: 1 }\n];\nexport const defaultTextOverlapEnabledZoom = 3;\nexport const defaultMapCenter: [number, number] = [0, 0];\n","/* eslint-disable @typescript-eslint/naming-convention */\n/* eslint-disable @angular-eslint/no-input-rename */\nimport { Any } from '@angular-ru/common/typings';\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { FeatureCollection } from 'geojson';\nimport { FullscreenControl, Layout, Map, MapLayerMouseEvent, Marker, NavigationControl, Popup } from 'maplibre-gl';\n\nimport { Edge, MapMarker, MiniMapOptions, Node, PopupContent, PopupLayer, ZoomLookup } from './map';\nimport {\n  blankStyle, defaultEdges, defaultInitialZoom, defaultMapCenter, defaultMinimapOptions, defaultNodes,\n  defaultTextOverlapEnabledZoom,\n} from './map-defaults';\nimport { MiniMap } from './minimap';\nimport { ZoomLevelControl } from './zoom-level.control';\n\n\n@Component({\n  selector: 'm4s-map',\n  templateUrl: './map.component.html',\n  styleUrls: ['./map.component.scss']\n})\nexport class MapComponent {\n  // Inputs\n  @Input() mapStyle = blankStyle;\n  @Input() edgeFeatures!: FeatureCollection;\n  @Input() nodeFeatures!: FeatureCollection;\n  @Input() clusterFeatures!: FeatureCollection;\n  @Input() boundaryFeatures!: FeatureCollection;\n  @Input() currentZoom = defaultInitialZoom;\n  @Input() mapMarkers: MapMarker[] = [];\n\n  private initialZoomConfig: number = defaultInitialZoom;\n  @Input('initialZoomConfig')\n  set InitialZoomConfig(initialZoom: number | undefined) {\n    this.initialZoomConfig = initialZoom ?? defaultInitialZoom;\n  }\n\n  private minimapConfig: MiniMapOptions = defaultMinimapOptions;\n  @Input('minimapConfig')\n  set MinimapConfig(options: MiniMapOptions | undefined) {\n    this.minimapConfig = options ?? defaultMinimapOptions;\n  }\n\n  private edgesConfig: Edge[] = defaultEdges;\n  @Input('edgesConfig')\n  set EdgesConfig(edges: Edge[] | undefined) {\n    this.edgesConfig = edges ?? defaultEdges;\n  }\n\n  private nodesConfig: Node[] = defaultNodes;\n  @Input('nodesConfig')\n  set NodesConfig(nodes: Node[] | undefined) {\n    this.nodesConfig = nodes ?? defaultNodes;\n  }\n\n  private textOverlapEnabledZoomConfig: number = defaultTextOverlapEnabledZoom;\n  @Input('textOverlapEnabledZoomConfig')\n  set TextOverlapEnabledZoomConfig(zoom: number | undefined) {\n    this.textOverlapEnabledZoomConfig = zoom ?? defaultTextOverlapEnabledZoom;\n  }\n\n  mapCenterConfig: [number, number] = defaultMapCenter;\n  @Input('mapCenterConfig')\n  set MapCenterConfig(mapCenter: [number, number] | undefined) {\n    this.mapCenterConfig = mapCenter ?? defaultMapCenter;\n  }\n\n  // Outputs\n  @Output() readonly nodeClick = new EventEmitter<MapLayerMouseEvent>();\n  @Output() readonly edgeClick = new EventEmitter<MapLayerMouseEvent>();\n  @Output() readonly zoomChange = new EventEmitter<number>();\n  @Output() readonly panChange = new EventEmitter<[number, number]>();\n\n  map!: Map;\n  nodeZoomIndex = 0;\n  edgeZoomIndex = 0;\n  hoverEdgeID: string | number | undefined;\n  hoverNodeID: string | number | undefined;\n  textOverlapEnabled = false;\n\n  // These allow the layer tags to be much more readable.\n  currentNodeFormula: Any = ['at', ['get', 'level'], ['literal', this.nodesConfig]];\n  currentEdgeFormula: Any = ['get', 'zoom', ['at', ['get', 'level'], ['literal', this.edgesConfig]]];\n  edgeFormula = ['at', ['get', 'level'], ['literal', this.edgesConfig]];\n  lastEdgeFormula = ['at', this.edgesConfig.length - 1, ['literal', this.edgesConfig]];\n\n  nodeLabelsLayout: Layout = {\n    'text-field': '{label}',\n    'text-font': ['Open Sans Regular'],\n    'text-size': ['get', 'fontSize', this.currentNodeFormula],\n    'text-variable-anchor': ['top', 'bottom', 'top-left', 'top-right', 'bottom-left', 'bottom-right', 'left', 'right', 'center'],\n    'text-radial-offset': 0.25,\n    'text-allow-overlap': false\n  } as unknown as Layout;\n\n  /*\n    Popup content needs to follow specific pattern to function properly.\n    Property names will be used to look up data from the geoJson sources.\n    Pass in format ['<anyHTML>and text</anyHTML><p>', 'propertyName', '</p>more html or text']\n\n    You can pass in as many as you like but they need to alternate between raw html, and property names.\n    You can also pass in a formatter with the property name in format ['propertyName', formatterMethod]\n  */\n  popups: PopupLayer[] = [\n    {\n      layer: 'edges',\n      content: [\n        '<p class=\"popup-label\">Edge</p><p>',\n        ['label', this.capitalizeFirstLetter],\n        '</p>'\n      ]\n    },\n    {\n      layer: 'nodes',\n      content: [\n        '<p class=\"popup-label\">Node</p><p>',\n        'label',\n        '</p>'\n      ]\n    }\n  ];\n\n  containerStyles = `\n      border: 1px solid lightgray;\n      border-radius: 5px;\n      -webkit-box-shadow: 3px 3px 5px 4px #00000021;\n      -moz-box-shadow: 3px 3px 5px 4px #00000021;\n      box-shadow: 3px 3px 5px 4px #00000021;\n  `;\n\n  capitalizeFirstLetter(input: string): string {\n    return input.charAt(0).toUpperCase() + input.slice(1);\n  }\n\n  nodeClicked(event: MapLayerMouseEvent): void {\n    this.nodeClick.emit(event);\n  }\n\n  edgeClicked(event: MapLayerMouseEvent): void {\n    this.edgeClick.emit(event);\n  }\n\n  onMapLoad(map: Map): void {\n    this.map = map;\n\n    if (this.initialZoomConfig !== defaultInitialZoom) {\n      map.setZoom(this.initialZoomConfig);\n    }\n\n    this.currentZoom = map.getZoom();\n\n    // Use the same map center for the minimap unless the minimapOptions have been customized.\n    if (this.minimapConfig === defaultMinimapOptions) {\n      this.minimapConfig.center = this.mapCenterConfig;\n    }\n\n    // ShowCompass off to disable rotation.\n    map.addControl(new NavigationControl({ showCompass: false }), 'top-right');\n    map.addControl(new FullscreenControl({}), 'top-right');\n    if (this.nodeFeatures.features.length === 0) {\n      console.warn('0 node features.');\n    } else if (this.clusterFeatures.features.length === 0) {\n      console.warn('0 cluster features');\n    } else {\n      map.addControl(new MiniMap({ nodes: this.nodeFeatures, clusters: this.clusterFeatures }, this.minimapConfig), 'bottom-right');\n    }\n    map.addControl(new ZoomLevelControl(), 'bottom-right');\n\n    this.map.resize();\n\n    this.addMapMarkers(this.mapMarkers);\n    this.addEdgeHover(map);\n    this.addNodeHover(map);\n    this.addPopups();\n\n    // When the user zooms the map, this method handles showing and hiding data based on zoom level\n    map.on('zoom', () => this.updateFilters());\n    map.on('zoomend', () => this.zoomChange.emit(this.map.getZoom()));\n    map.on('moveend', () => this.panChange.emit(this.map.getCenter().toArray() as [number, number]));\n  }\n\n  addMapMarkers(markers: MapMarker[]): void {\n    if (!markers.length) {\n      return;\n    }\n\n    markers.forEach(marker => {\n      const popup = new Popup({\n        closeOnClick: true,\n        closeOnMove: true,\n        closeButton: false,\n        className: 'map-marker-popup'\n      }).setHTML(`<h3>${marker.title}</h3>`);\n\n      new Marker(marker.config ?? {})\n        .setLngLat(marker.coordinates)\n        .setPopup(popup)\n        .addTo(this.map);\n    });\n  }\n\n  // In order to show more or less data based on the zoom level we have to update the layer filters when the map zooms.\n  updateFilters(): void {\n    const { map, edgesConfig, nodesConfig, textOverlapEnabledZoomConfig, textOverlapEnabled } = this;\n    const currentZoom: number = map.getZoom();\n\n    // When the zoom level changes, check if we need to display a different set of nodes. If we do, update the node filter.\n    if (this.nodeLevelChange()) {\n      const currentNode = ['get', 'zoom', ['at', ['get', 'level'], ['literal', nodesConfig]]];\n      map.setFilter('node_labels', ['>=', currentZoom, currentNode]);\n    }\n\n    // When the zoom level changes, check if we need to display a different set of edges. If we do, update the edges filter.\n    // We decided showing the nodes (without labels) at the same time as the edges was preferable, instead of waiting for\n    // when the labels will fit.\n    if (this.edgeLevelChange()) {\n      const currentEdge = ['get', 'zoom', ['at', ['get', 'level'], ['literal', edgesConfig]]];\n      map.setFilter('nodes', ['>=', currentZoom, currentEdge]);\n      map.setFilter('edges_border', ['>=', currentZoom, currentEdge]);\n      map.setFilter('edges', ['>=', currentZoom, currentEdge]);\n    }\n\n    //  Determing if text overlap should be enabled or disabled based on the break point set in the config object.\n    if (!textOverlapEnabled && currentZoom > textOverlapEnabledZoomConfig) {\n      map.setLayoutProperty('node_labels', 'text-allow-overlap', true);\n      this.textOverlapEnabled = true;\n    } else if (textOverlapEnabled && currentZoom < textOverlapEnabledZoomConfig) {\n      map.setLayoutProperty('node_labels', 'text-allow-overlap', false);\n      this.textOverlapEnabled = false;\n    }\n  }\n\n  // Returns whether or not the zoom level has changed enough to warrant a change in which nodes we are displaying.\n  nodeLevelChange(): boolean {\n    const currentIndex: number = this.getZoomIndex(this.nodesConfig);\n    if (currentIndex === this.nodeZoomIndex) {\n      return false;\n    }\n    this.nodeZoomIndex = currentIndex;\n    return true;\n  }\n\n  // Returns whether or not the zoom level has changed enough to warrant a change in which edges we are displaying.\n  edgeLevelChange(): boolean {\n    const currentIndex: number = this.getZoomIndex(this.edgesConfig);\n    if (currentIndex === this.edgeZoomIndex) {\n      return false;\n    }\n    this.edgeZoomIndex = currentIndex;\n    return true;\n  }\n\n  addEdgeHover(map: Map): void {\n    map.on('mousemove', 'edges', (e) => {\n      // When the mouse moves, check if the mouse is on top of a feature from the edges source.\n      if (!e.features) {\n        return;\n      }\n\n      if (e.features.length > 0) {\n        // If there was already an edge with the hover status, turn that hover status off first\n        if (this.hoverEdgeID) {\n          map.setFeatureState(\n            { source: 'edges', id: this.hoverEdgeID },\n            { hover: false }\n          );\n        }\n        // Set the hover status of the new edge to true, and save the ID to the object so we can compare\n        // later, when the mouse moves again.\n        this.hoverEdgeID = e.features[0].id;\n        map.setFeatureState(\n          { source: 'edges', id: this.hoverEdgeID },\n          { hover: true }\n        );\n      }\n    });\n\n    map.on('mouseleave', 'edges', () => {\n      // When the mouse leaves the edge source features, turn the hover status off\n      if (this.hoverEdgeID) {\n        map.setFeatureState(\n          { source: 'edges', id: this.hoverEdgeID },\n          { hover: false }\n        );\n      }\n      this.hoverEdgeID = undefined;\n    });\n  }\n\n  addNodeHover(map: Map): void {\n    map.on('mousemove', 'nodes', (e) => {\n      if (!e.features) {\n        return;\n      }\n\n      // When the mouse moves, check if the mouse is on top of a feature from the nodes source.\n      if (e.features.length > 0) {\n        // If there was already an node with the hover status, turn that hover status off first\n        if (this.hoverNodeID) {\n          map.setFeatureState(\n            { source: 'nodes', id: this.hoverNodeID },\n            { hover: false }\n          );\n        }\n        // Set the hover status of the new node to true, and save the ID to the object so we can compare\n        // later, when the mouse moves again.\n        this.hoverNodeID = e.features[0].id;\n        map.setFeatureState(\n          { source: 'nodes', id: this.hoverNodeID },\n          { hover: true }\n        );\n      }\n    });\n\n    map.on('mouseleave', 'nodes', () => {\n      // When the mouse leaves the edge source features, turn the hover status off\n      if (this.hoverNodeID) {\n        map.setFeatureState(\n          { source: 'nodes', id: this.hoverNodeID },\n          { hover: false }\n        );\n      }\n      this.hoverNodeID = undefined;\n    });\n  }\n\n  addPopups(): void {\n    this.popups.forEach(popup => {\n      this.addPopupOnClick(popup.layer, popup.content);\n    });\n  }\n\n  addPopupOnClick(layer: string, content: PopupContent): void {\n    const { map } = this;\n    // When a click event occurs on a feature in the places layer, open a popup at the\n    // location of the feature, with description HTML from its properties.\n    map.on('click', layer, (e) => {\n      if (!e.features) {\n        return;\n      }\n\n      const descriptionHTML = this.createPopupHTML(e.features[0].properties, content);\n      new Popup({\n        closeOnClick: true,\n        closeOnMove: true,\n        closeButton: false,\n        className: 'map-marker-popup'\n      })\n        .setLngLat(e.lngLat)\n        .setHTML(descriptionHTML)\n        .addTo(map);\n    });\n\n    // Change the cursor to a pointer when the mouse is over the places layer.\n    map.on('mouseenter', layer, () => {\n      map.getCanvas().style.cursor = 'pointer';\n    });\n\n    // Change it back to a pointer when it leaves.\n    map.on('mouseleave', layer, () => {\n      map.getCanvas().style.cursor = '';\n    });\n  }\n\n  // Takes the description field of the element, and uses it with the popup content defined in the config object\n  // to return the concatenated html string.\n  createPopupHTML(description: Any, content: PopupContent): string {\n    let html = '';\n    content.forEach((element, index: number) => {\n      if (!element) {\n        return;\n      }\n      // The config object for popups is structued like ['<html>', 'propertyName', '</html>]\n      // so on even indexes, we just concatenate the html string, on odd indexes we use the string to lookup the property value.\n      if (this.isEven(index)) {\n        html += element;\n\n      // Along with property values, you can pass along a formatting function in form of ['propertyName', function]\n      // This checks if there is one, if there is it uses that function to format the value of the property before\n      // concatenating it.\n      } else if (typeof (element) === 'string') {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        html += description[element];\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        html += element[1](description[element[0]]);\n      }\n    });\n\n    return html;\n  }\n\n  // Converts the current zoom number, to the index number of the object with the same .zoom property in the lookup array passed in.\n  // Used because getZoom() will return very precise values, and the nodes / edges config objects will not match up exactly.\n  getZoomIndex(zoomLookup: ZoomLookup): number {\n    const zoom: number = this.map.getZoom();\n    for (let index = 0; index <= zoomLookup.length; index++) {\n      if (index === (zoomLookup.length - 1)) {\n        return index;\n      }\n      if (zoom >= zoomLookup[index].zoom && zoom < zoomLookup[index + 1].zoom) {\n        return index;\n      }\n    }\n\n    console.error('No Zoom index found.  Zoom lookup: ', zoomLookup);\n    return 0;\n  }\n\n  isEven(index: number): boolean {\n    return index % 2 === 0;\n  }\n}\n","<mgl-map\n  [style]=\"mapStyle\"\n  [zoom]=\"[currentZoom]\"\n  [center]=\"mapCenterConfig\"\n  (mapLoad)=\"onMapLoad($event)\"\n  [renderWorldCopies]=\"false\"\n>\n  <mgl-geojson-source\n    id=\"edges\"\n    [data]=\"edgeFeatures\"\n  ></mgl-geojson-source>\n  <mgl-geojson-source\n    id=\"nodes\"\n    [data]=\"nodeFeatures\"\n  ></mgl-geojson-source>\n  <mgl-geojson-source\n    id=\"clusters\"\n    [data]=\"clusterFeatures\"\n  ></mgl-geojson-source>\n  <mgl-geojson-source\n    id=\"boundaries\"\n    [data]=\"boundaryFeatures\"\n  ></mgl-geojson-source>\n\n  <!-- CLUSTERS -->\n  <mgl-layer\n    id=\"clusters\"\n    source=\"clusters\"\n    type=\"fill\"\n    [paint]=\"{\n      'fill-color': ['get', 'fill'],\n      'fill-opacity': 0.7,\n      'fill-outline-color': ['get', 'stroke']\n    }\">\n  </mgl-layer>\n\n  <!-- BOUNDARIES -->\n  <mgl-layer\n    id=\"boundaries\"\n    source=\"boundaries\"\n    type=\"line\"\n    minZoom=\"2\"\n    [paint]=\"{\n      'line-color': ['get', 'stroke'],\n      'line-width': 0.5,\n      'line-opacity': 0.8\n    }\"\n  ></mgl-layer>\n\n  <!-- EDGES -->\n  <mgl-layer\n    id=\"edges\"\n    source=\"edges\"\n    type=\"line\"\n    [paint]=\"{\n      'line-color': ['case',\n          ['boolean', ['feature-state', 'hover'], false], 'red',\n          ['get', 'color', edgeFormula]\n      ],\n      'line-width': ['get', 'width', edgeFormula],\n      'line-opacity': ['get', 'opacity', edgeFormula]\n    }\"\n    [filter]=\"['>=', currentZoom, ['get', 'zoom', edgeFormula]]\"\n    (layerClick)=\"edgeClicked($event)\">\n  </mgl-layer>\n\n  <!-- EDGES BORDER -->\n  <mgl-layer\n    id=\"edges_border\"\n    source=\"edges\"\n    type=\"line\"\n    [paint]=\"{\n      'line-color': ['get', 'borderColor', edgeFormula],\n      'line-width': ['get', 'borderWidth', edgeFormula],\n      'line-opacity': ['get', 'borderOpacity', edgeFormula],\n      'line-gap-width': ['get', 'width', edgeFormula]\n    }\"\n    [filter]=\"['>=', currentZoom, ['get', 'zoom', edgeFormula]]\">\n  </mgl-layer>\n\n  <!-- NODES -->\n  <mgl-layer\n    id=\"nodes\"\n    source=\"nodes\"\n    type=\"circle\"\n    [paint]=\"{\n      'circle-color': ['case',\n          ['boolean', ['feature-state', 'hover'], false], 'red',\n          'black'\n      ],\n      'circle-radius': 3\n    }\"\n    [filter]=\"['>=', currentZoom, currentEdgeFormula]\"\n    (layerClick)=\"nodeClicked($event)\">\n  </mgl-layer>\n\n  <!-- NODE LABELS -->\n  <mgl-layer\n    id=\"node_labels\"\n    source=\"nodes\"\n    type=\"symbol\"\n    [layout]=\"nodeLabelsLayout\"\n    [filter]=\"['>=', currentZoom, ['get', 'zoom', currentNodeFormula]]\">\n  </mgl-layer>\n</mgl-map>","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NgxMapLibreGLModule } from 'ngx-maplibre-gl';\n\nimport { MapComponent } from './map.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    NgxMapLibreGLModule\n  ],\n  declarations: [MapComponent],\n  exports: [MapComponent]\n})\nexport class MapModule { }\n","import { Any, Immutable } from '@angular-ru/common/typings';\nimport { FeatureCollection } from 'geojson';\nimport { LngLatBoundsLike, Style } from 'maplibre-gl';\n\n\nexport interface Edge {\n  level: number;\n  zoom: number;\n  color?: string;\n  width?: number;\n  opacity?: number;\n  borderOpacity?: number;\n  borderColor?: string;\n  borderWidth?: number;\n}\n\nexport interface Node {\n  level: number;\n  zoom: number;\n  fontSize: number;\n}\n\nexport interface Cluster {\n  fillOpacity: number;\n  borderLineWidth: number;\n  borderLineOpacity: number;\n  borderLineMinZoom: number;\n}\n\nexport interface MapSources {\n  clusters: FeatureCollection;\n  nodes: FeatureCollection;\n}\n\nexport type ZoomLevel = [number, number, number];\nexport interface MiniMapOptions {\n  id: number | string;\n  width: string;\n  height: string;\n  style: Style;\n  center: [number, number];\n  zoom: number;\n  containerStyles: string;\n  zoomAdjust: null | (() => unknown);\n  zoomLevels: ZoomLevel[];\n  edgeColor: string;\n  edgeWidth: number;\n  edgeOpacity: number;\n  fillColor: string;\n  fillOpacity: number;\n  dragPan: boolean;\n  scrollZoom: boolean;\n  boxZoom: boolean;\n  dragRotate: boolean;\n  keyboard: boolean;\n  doubleClickZoom: boolean;\n  touchZoomRotate: boolean;\n  maxBounds?: LngLatBoundsLike;\n  bounds?: Any;\n}\n\nexport type PopupContent = (string | [string, ((input: Any) => string)])[];\n\nexport interface PopupLayer {\n  layer: string;\n  content: PopupContent;\n}\n\nexport interface MapMarkerConfig {\n  color?: string;\n  rotation?: number;\n}\nexport interface MapMarker {\n  config?: MapMarkerConfig;\n  coordinates: [number, number];\n  title: string;\n}\n\nexport interface ZoomLookupItem {\n  zoom: number;\n}\nexport type ZoomLookup = ZoomLookupItem[];\n\nexport interface MapDatasetConfig {\n  nodeConfig?: Node[];\n  edgeConfig?: Edge[];\n  minimapConfig?: MiniMapOptions;\n  mapCenter?: [number, number];\n  initialZoom?: number;\n  textOverlapEnabledZoom?: number;\n}\n\nexport interface MapDataset {\n  boundary: FeatureCollection;\n  cluster: FeatureCollection;\n  edges: FeatureCollection;\n  nodes: FeatureCollection;\n  config?: MapDatasetConfig;\n\n  [id: string]: FeatureCollection | MapDatasetConfig | undefined;\n}\n\nexport interface MapDatasetCache {\n  [key: string]: Immutable<MapDataset>;\n}\n\nexport interface MapDatasetDirectory {\n  id: string;\n  name: string;\n  dir: string;\n  config?: string;\n}\n\nexport const EMPTY_FEATURES: FeatureCollection = {\n  type: 'FeatureCollection',\n  features: []\n};\n\nexport const EMPTY_DATASET: MapDataset = {\n  boundary: EMPTY_FEATURES,\n  cluster: EMPTY_FEATURES,\n  edges: EMPTY_FEATURES,\n  nodes: EMPTY_FEATURES\n};\n","import { Feature, Polygon } from 'geojson';\nimport { GeoJSONSource, LngLatBounds, Map as MapboxMap, MapMouseEvent, Style } from 'maplibre-gl';\n\nimport { MapSources, MiniMapOptions } from './map';\n\n\n/*\n  This is a modified and updated version of Brendan Matkin's Mapboxgl-Minimap:\n  https://github.com/brendanmatkin/mapboxgl-minimap\n*/\n\nconst blankStyle: Style = {\n  version: 8,\n  name: 'Blank',\n  center: [0, 0],\n  zoom: 0,\n  sources: {},\n  sprite: 'https://cdn.jsdelivr.net/gh/lukasmartinelli/osm-liberty@gh-pages/sprites/osm-liberty',\n  glyphs: 'https://cdn.jsdelivr.net/gh/orangemug/font-glyphs@gh-pages/glyphs/{fontstack}/{range}.pbf',\n  layers: [\n    {\n      id: 'background',\n      type: 'background',\n      paint: {\n        'background-color': 'rgba(255,255,255,1)'\n      }\n    }\n  ]\n};\n\nexport class MiniMap {\n  sources: MapSources;\n  options: MiniMapOptions;\n  ticking: boolean;\n  lastMouseMoveEvent: null;\n  parentMap!: MapboxMap;\n  isDragging: boolean;\n  isCursorOverFeature: boolean;\n  previousPoint: number[];\n  currentPoint: number[];\n  trackingRectCoordinates: number[][][];\n  container?: HTMLDivElement;\n  miniMap!: MapboxMap;\n  trackingRect!: GeoJSONSource;\n  trackingRectData!: Feature<Polygon>;\n  miniMapCanvas!: HTMLElement;\n\n  constructor(sources: MapSources, options: MiniMapOptions) {\n    this.sources = sources;\n    this.options = options;\n    Object.assign(this.options, options);\n\n    this.ticking = false;\n    this.lastMouseMoveEvent = null;\n    this.isDragging = false;\n    this.isCursorOverFeature = false;\n    this.previousPoint = [0, 0];\n    this.currentPoint = [0, 0];\n    this.trackingRectCoordinates = [[[], [], [], [], []]];\n  }\n\n  onAdd(parentMap: MapboxMap): HTMLDivElement {\n    this.parentMap = parentMap;\n\n    const opts = this.options;\n    const container = this.container = this.createContainer(parentMap);\n    const miniMap = this.miniMap = new MapboxMap({\n      attributionControl: false,\n      container,\n      style: blankStyle,\n      zoom: opts.zoom,\n      center: opts.center\n    });\n\n    if (opts.maxBounds) {\n      miniMap.setMaxBounds(opts.maxBounds);\n    }\n\n    miniMap.on('load', this.load.bind(this));\n\n    return this.container;\n  }\n\n  onRemove(_parentMap: MapboxMap): void {\n    return;\n  }\n\n  load(): void {\n    const opts = this.options;\n    const parentMap = this.parentMap;\n    const miniMap = this.miniMap;\n    const interactions = [\n      'dragPan', 'scrollZoom', 'boxZoom', 'dragRotate',\n      'keyboard', 'doubleClickZoom', 'touchZoomRotate'\n    ];\n\n    interactions.forEach((i: string) => {\n      const key = i as keyof MiniMapOptions;\n      const map = this.miniMap as unknown as { [key: string]: { disable: () => void } };\n      if (opts[key] !== true) {\n        map[i].disable();\n      }\n    });\n\n    if (typeof opts.zoomAdjust === 'function') {\n      this.options.zoomAdjust = opts.zoomAdjust.bind(this);\n    } else if (opts.zoomAdjust === null) {\n      this.options.zoomAdjust = this.zoomAdjust.bind(this);\n    }\n\n    const bounds = miniMap.getBounds();\n\n    this.convertBoundsToPoints(bounds);\n\n    this.trackingRectData = {\n      type: 'Feature',\n      properties: {\n        name: 'trackingRect'\n      },\n      geometry: {\n        type: 'Polygon',\n        coordinates: this.trackingRectCoordinates\n      }\n    };\n\n    miniMap.addSource('trackingRect', { type: 'geojson', data: this.trackingRectData });\n\n    // Add the geojson layers of our data so the minimap matches the parent map\n    miniMap.addLayer({\n      id: 'cluster',\n      type: 'fill',\n      source: { type: 'geojson', data: this.sources.clusters },\n      layout: {},\n      paint: {\n        'fill-color': ['get', 'fill'],\n        'fill-opacity': 0.7,\n        'fill-outline-color': ['get', 'stroke']\n      },\n    });\n    miniMap.addLayer({\n      id: 'cluster_boundary',\n      type: 'line',\n      minzoom: 2,\n      source: { type: 'geojson', data: this.sources.clusters },\n      layout: {},\n      paint: {\n        'line-color': ['get', 'stroke'],\n        'line-width': 0.5,\n        'line-opacity': 0.8\n      },\n    });\n    miniMap.addLayer({\n      id: 'node_labels',\n      type: 'symbol',\n      minzoom: 2,\n      source: { type: 'geojson', data: this.sources.nodes },\n      layout: {\n        'text-field': '{label}',\n        'text-font': ['Open Sans Regular'],\n        'text-size': 14,\n        'text-anchor': 'center',\n        'text-justify': 'center',\n        'text-allow-overlap': false\n\n      },\n      filter: ['==', 'level', 1]\n    });\n    miniMap.addLayer({\n      id: 'node_labels_2',\n      type: 'symbol',\n      minzoom: 3,\n      source: { type: 'geojson', data: this.sources.nodes },\n      layout: {\n        'text-field': '{label}',\n        'text-font': ['Open Sans Regular'],\n        'text-size': 9,\n        'text-anchor': 'center',\n        'text-justify': 'center'\n      },\n      filter: ['all',\n        ['<=', 'level', 3],\n        ['>', 'level', 1]\n      ]\n    });\n\n    miniMap.addLayer({\n      id: 'trackingRectOutline',\n      type: 'line',\n      source: 'trackingRect',\n      layout: {},\n      paint: {\n        'line-color': opts.edgeColor,\n        'line-width': opts.edgeWidth,\n        'line-opacity': opts.edgeOpacity\n      }\n    });\n\n    // needed for dragging\n    miniMap.addLayer({\n      id: 'trackingRectFill',\n      type: 'fill',\n      source: 'trackingRect',\n      layout: {},\n      paint: {\n        'fill-color': opts.fillColor,\n        'fill-opacity': opts.fillOpacity\n      }\n    });\n\n    this.trackingRect = this.miniMap.getSource('trackingRect') as GeoJSONSource;\n\n    this.update();\n\n    parentMap.on('move', this.update.bind(this));\n\n    miniMap.on('mousemove', this.mouseMove.bind(this));\n    miniMap.on('mousedown', this.mouseDown.bind(this));\n    miniMap.on('mouseup', this.mouseUp.bind(this));\n\n    miniMap.on('touchmove', this.mouseMove.bind(this));\n    miniMap.on('touchstart', this.mouseDown.bind(this));\n    miniMap.on('touchend', this.mouseUp.bind(this));\n\n    this.miniMapCanvas = miniMap.getCanvasContainer();\n    this.miniMapCanvas.addEventListener('wheel', this.preventDefault);\n    this.miniMapCanvas.addEventListener('mousewheel', this.preventDefault);\n  }\n\n  mouseDown(e: MapMouseEvent): void {\n    if (this.isCursorOverFeature) {\n      this.isDragging = true;\n      this.previousPoint = this.currentPoint;\n      this.currentPoint = [e.lngLat.lng, e.lngLat.lat];\n    }\n  }\n\n  mouseMove(e: MapMouseEvent): void {\n    this.ticking = false;\n\n    const miniMap = this.miniMap;\n    const features = miniMap.queryRenderedFeatures(e.point, {\n      layers: ['trackingRectFill']\n    });\n\n    // don't update if we're still hovering the area\n    if (!(this.isCursorOverFeature && features.length > 0)) {\n      this.isCursorOverFeature = features.length > 0;\n      this.miniMapCanvas.style.cursor = this.isCursorOverFeature ? 'move' : '';\n    }\n\n    if (this.isDragging) {\n      this.previousPoint = this.currentPoint;\n      this.currentPoint = [e.lngLat.lng, e.lngLat.lat];\n\n      const offset = [\n        this.previousPoint[0] - this.currentPoint[0],\n        this.previousPoint[1] - this.currentPoint[1]\n      ];\n\n      const newBounds = this.moveTrackingRect(offset);\n\n      this.parentMap.fitBounds(newBounds, { duration: 80, linear: true });\n    }\n  }\n\n  mouseUp(): void {\n    this.isDragging = false;\n    this.ticking = false;\n  }\n\n  moveTrackingRect(offset: number[]): LngLatBounds {\n    const rectPoints = this.trackingRectCoordinates[0] as [number, number][];\n    const bounds = new LngLatBounds();\n    rectPoints.forEach(coord => bounds.extend(coord));\n\n    const ne = bounds.getNorthEast();\n    const sw = bounds.getSouthWest();\n    ne.lat -= offset[1];\n    ne.lng -= offset[0];\n    sw.lat -= offset[1];\n    sw.lng -= offset[0];\n\n    this.convertBoundsToPoints(bounds);\n    this.trackingRect.setData(this.trackingRectData);\n\n    return bounds;\n  }\n\n  setTrackingRectBounds(bounds: LngLatBounds): void {\n    this.convertBoundsToPoints(bounds);\n    this.trackingRect.setData(this.trackingRectData);\n  }\n\n  convertBoundsToPoints(bounds: LngLatBounds): void {\n    const ne = bounds.getNorthEast();\n    const sw = bounds.getSouthWest();\n    const trc = this.trackingRectCoordinates;\n\n    trc[0][0][0] = ne.lng;\n    trc[0][0][1] = ne.lat;\n    trc[0][1][0] = sw.lng;\n    trc[0][1][1] = ne.lat;\n    trc[0][2][0] = sw.lng;\n    trc[0][2][1] = sw.lat;\n    trc[0][3][0] = ne.lng;\n    trc[0][3][1] = sw.lat;\n    trc[0][4][0] = ne.lng;\n    trc[0][4][1] = ne.lat;\n  }\n\n  update(): void {\n    if (this.isDragging) {\n      return;\n    }\n\n    const parentBounds = this.parentMap.getBounds();\n\n    this.setTrackingRectBounds(parentBounds);\n\n    if (typeof this.options.zoomAdjust === 'function') {\n      this.options.zoomAdjust();\n    }\n  }\n\n  zoomAdjust(): void {\n    const miniMap = this.miniMap;\n    const parentMap = this.parentMap;\n    const miniZoom = miniMap.getZoom();\n    const parentZoom = parentMap.getZoom();\n    const levels = this.options.zoomLevels;\n    let found = false;\n\n    levels.forEach(zoom => {\n      if (!found && parentZoom >= zoom[0]) {\n        if (miniZoom >= zoom[1]) {\n          miniMap.setZoom(zoom[2]);\n        }\n\n        miniMap.setCenter(parentMap.getCenter());\n        found = true;\n      }\n    });\n\n    if (!found && miniZoom !== this.options.zoom) {\n      if (typeof this.options.bounds === 'object') {\n        miniMap.fitBounds(this.options.bounds, { duration: 50 });\n      }\n\n      miniMap.setZoom(this.options.zoom);\n    }\n  }\n\n  createContainer(parentMap: MapboxMap): HTMLDivElement {\n    const opts = this.options;\n    const container = document.createElement('div');\n\n    container.className = 'maplibregl-ctrl-minimap maplibregl-ctrl';\n    container.setAttribute('style', 'width: ' + opts.width + '; height: ' + opts.height + '; ' + opts.containerStyles);\n    container.addEventListener('contextmenu', this.preventDefault);\n\n    parentMap.getContainer().appendChild(container);\n\n    if (opts.id !== '') {\n      container.id = opts.id.toString();\n    }\n\n    return container;\n  }\n\n  preventDefault(e: { preventDefault: () => void }): void {\n    e.preventDefault();\n  }\n}\n","import { IControl, Map as MapboxMap } from 'maplibre-gl';\n\n\nexport class ZoomLevelControl implements IControl {\n  container?: HTMLElement;\n  map?: MapboxMap;\n  zoomCallback?: () => void;\n\n  onAdd(map: MapboxMap): HTMLElement {\n    this.map = map;\n    this.container = document.createElement('div');\n    this.container.className = 'maplibregl-zoom-level-display';\n    this.updateText();\n    this.zoomCallback = () => this.updateText();\n    map.on('zoom', this.zoomCallback);\n    return this.container;\n  }\n\n  updateText(): void {\n    if (this.map && this.container) {\n      this.container.textContent = this.map.getZoom().toFixed(2) + 'x';\n    }\n  }\n\n  onRemove(map: MapboxMap): void {\n    map.off('zoom', this.zoomCallback!);\n    this.container?.parentNode?.removeChild(this.container);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { HomeComponent } from './home.component';\n\nconst routes: Routes = [{\n  path: '',\n  component: HomeComponent\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomeRoutingModule { }\n","import { ChangeDetectionStrategy, Component, HostBinding } from '@angular/core';\n\n@Component({\n  selector: 'm4s-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class HomeComponent {\n  @HostBinding('class') readonly clsName = 'm4s-home';\n}\n","<img class=\"banner\" src=\"assets/pages/banner.png\">\n<div class=\"content\">\n  <markdown class=\"index\" src=\"assets/pages/about.md\"></markdown>\n  <div class=\"visualizer-image\">\n    <img src=\"assets/network.png\">\n    <button class=\"visualizer-open\" mat-button routerLink=\"/visualizer\">Open Visualizer</button>\n  </div>\n</div>","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MarkdownModule } from 'ngx-markdown';\nimport { MatButtonModule } from '@angular/material/button';\n\nimport { HomeRoutingModule } from './home-routing.module';\nimport { HomeComponent } from './home.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    HomeRoutingModule,\n    MatButtonModule,\n    MarkdownModule\n  ],\n  declarations: [HomeComponent]\n})\nexport class HomeModule { }\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport { VisualizerComponent } from './visualizer.component';\n\nconst routes: Routes = [{\n  path: '',\n  component: VisualizerComponent\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class VisualizerRoutingModule { }\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { EMPTY_DATASET } from '../../map/map';\nimport { MapDataService } from '../../services/map-data.service';\n\n@Component({\n  selector: 'm4s-visualizer',\n  templateUrl: './visualizer.component.html',\n  styleUrls: ['./visualizer.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class VisualizerComponent implements OnDestroy {\n\n  events: string[] = [];\n  opened = true;\n  iconOpened = true;\n\n  dataset = EMPTY_DATASET;\n\n  get displayMap(): boolean {\n    const { dataset } = this;\n    if (!dataset.nodes) {\n      return false;\n    }\n    if (!dataset.nodes.features) {\n      return false;\n    }\n    if (dataset.nodes.features.length < 1) {\n      return false;\n    }\n\n    return true;\n  }\n\n  private readonly subscriptions = new Subscription();\n\n  constructor(\n    readonly mapData: MapDataService,\n    cdr: ChangeDetectorRef\n  ) {\n    const sub = mapData.dataset$.subscribe(ds => {\n      this.dataset = ds;\n      cdr.markForCheck();\n    });\n\n    this.subscriptions.add(sub);\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  mapDataSwitcherChange(value: string): void {\n    this.mapData.setDataset(value);\n  }\n\n  toggle(): void {\n    const { opened } = this;\n    if (opened) {\n      this.opened = false;\n    } else {\n      this.opened = true;\n    }\n  }\n}\n","<div class=\"map-wrapper\">\n  <mat-sidenav-container class=\"sidenav-container\">\n    <mat-sidenav #sidenav mode=\"side\" [(opened)]=\"opened\">\n      <mat-form-field appearance=\"fill\" *ngIf=\"(this.mapData.datasetDirectory$ | async)!.length > 1\" class=\"form-field\">\n        <mat-label>Select data set ...</mat-label>\n        <mat-select class=\"dataset-selector\"\n          (selectionChange)=\"mapDataSwitcherChange($event.value)\">\n          <mat-option *ngFor=\"let dataset of (this.mapData.datasetDirectory$ | async)\" [value]=\"dataset.id\">\n            {{ dataset.name }}\n          </mat-option>\n        </mat-select>\n      </mat-form-field>\n    </mat-sidenav>\n  \n    <mat-sidenav-content>\n      <p>\n        <button class=\"drawer-toggle\" mat-button (click)=\"sidenav.toggle(); toggle()\" [class.hidden]=\"opened\">\n          <mat-icon class=\"expand-collapse-icon\" aria-hidden=\"false\"\n            aria-label=\"Close side drawer\">\n            arrow_right\n          </mat-icon>\n        </button>\n\n        <button class=\"drawer-toggle\" mat-button (click)=\"sidenav.toggle(); toggle()\" [class.hidden]=\"!opened\">\n          <mat-icon class=\"expand-collapse-icon\" aria-hidden=\"false\"\n            aria-label=\"Close side drawer\">\n            arrow_left\n          </mat-icon>\n        </button>\n      </p>\n      <m4s-map\n        *ngIf=\"displayMap\"\n        [edgeFeatures]=\"dataset.edges\"\n        [nodeFeatures]=\"dataset.nodes\"\n        [clusterFeatures]=\"dataset.cluster\"\n        [boundaryFeatures]=\"dataset.boundary\"\n        [edgesConfig]=\"dataset.config?.edgeConfig\"\n        [nodesConfig]=\"dataset.config?.nodeConfig\"\n        [initialZoomConfig]=\"dataset.config?.initialZoom\"\n        [mapCenterConfig]=\"dataset.config?.mapCenter\"\n        [textOverlapEnabledZoomConfig]=\"dataset.config?.textOverlapEnabledZoom\"\n        [minimapConfig]=\"dataset.config?.minimapConfig\"\n      ></m4s-map>\n    </mat-sidenav-content>\n  </mat-sidenav-container>\n</div>","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MapDataService } from '../../services/map-data.service';\nimport { MapModule } from '../../map/map.module';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\n\nimport { VisualizerRoutingModule } from './visualizer-routing.module';\nimport { VisualizerComponent } from './visualizer.component';\n\nimport { MatSidenavModule } from '@angular/material/sidenav';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    VisualizerRoutingModule,\n    MatSelectModule,\n    MatFormFieldModule,\n    MatIconModule,\n    MapModule,\n    MatSidenavModule\n  ],\n  declarations: [VisualizerComponent],\n  providers: [MapDataService]\n})\nexport class VisualizerModule { }\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable, OnDestroy } from '@angular/core';\nimport { BehaviorSubject, forkJoin, Observable, of, Subscription } from 'rxjs';\nimport { catchError, take, tap } from 'rxjs/operators';\n\nimport { Edge, EMPTY_DATASET, MapDataset, MapDatasetDirectory } from '../map/map';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapDataService implements OnDestroy {\n  public dataset$: Observable<MapDataset>;\n  public datasetDirectory$: Observable<MapDatasetDirectory[]>;\n\n  private files: string[] = ['boundary', 'cluster', 'edges', 'nodes'];\n\n  private emptyDataset = EMPTY_DATASET;\n  private datasetSubject = new BehaviorSubject<MapDataset>(this.emptyDataset);\n  private datasetDirectorySubject = new BehaviorSubject<MapDatasetDirectory[]>([]);\n  private subscriptions = new Subscription();\n\n  constructor(private readonly http: HttpClient) {\n    this.dataset$ = this.datasetSubject.asObservable();\n    this.datasetDirectory$ = this.datasetDirectorySubject.asObservable();\n\n    // Grab the dataset directory index\n    this.http.get<MapDatasetDirectory[]>('assets/datasets/index.json')\n      .pipe(take(1), tap((dir) => this.datasetDirectorySubject.next(dir)))\n      .subscribe();\n\n    // Set current dataset to the 'first' dataset whenever a directory is loaded\n    this.subscriptions.add(\n      this.datasetDirectory$.pipe(tap((dir) => {\n        if (dir.length > 0) {\n          this.setDataset(dir[0].id);\n        }\n      })).subscribe()\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  setDataset(id: string): void {\n    // Send an empty dataset to clear the map\n    this.datasetSubject.next(this.emptyDataset);\n\n    this.getDataset(id)\n      .subscribe((dataset) => this.datasetSubject.next(dataset));\n  }\n\n  getDataset(id: string): Observable<MapDataset> {\n    const dataDirectory = this.datasetDirectorySubject.getValue();\n    if (!dataDirectory || !dataDirectory.find(d => d.id === id)) {\n      return of(EMPTY_DATASET);\n    }\n\n    const selectedDirectory = dataDirectory.find(d => d.id === id);\n    const baseUrl = selectedDirectory?.dir as string;\n    const dataReqs: Record<string, Observable<MapDataset | Node[] | Edge[]>> = {};\n\n    for (const file of this.files) {\n      dataReqs[file] = this.http.get<MapDataset>(`${baseUrl}/${file}.geojson`);\n    }\n\n    if (selectedDirectory?.config) {\n      dataReqs.config = this.http.get<MapDataset>(`${baseUrl}/${selectedDirectory.config}`);\n    }\n\n    return forkJoin(dataReqs).pipe(\n      catchError(() => of(this.emptyDataset)),\n      take(1)\n    );\n  }\n}\n","import { Directive, Type } from '@angular/core';\nimport { MatDialog, MatDialogConfig, MatDialogRef } from '@angular/material/dialog';\n\n\n/**\n * Type of modal components\n *\n * @template T The instance type.\n * @template D Modal data type.\n */\nexport interface ModalComponentConstructor<T, D> extends Type<T> {\n  /** Optional default data used whenever a new modal is opened. */\n  readonly DEFAULT_DATA?: D;\n  /** Optional default configuration used whenever a new modal is opened. */\n  readonly DEFAULT_CONFIG?: MatDialogConfig<D>;\n}\n\n\n/**\n * Base class for modals.\n */\n@Directive()\nexport class BaseModalComponent {\n  /** Material dialog service. Initialized in APP_INITIALIZER. */\n  static dialogService: MatDialog;\n\n  /**\n   * Opens a new subclass modal.\n   *\n   * @template T Modal instance type.\n   * @template D Modal data type.\n   * @template R Value returned when the modal is closed.\n   *\n   * @param this Reference to the subclass (properly typed).\n   * @param [data] Additional user data to pass to the modal.\n   * @param [config] Additional configuration.\n   * @returns A reference to the modal.\n   * @throws {Error} If open is called on a non subclass.\n   * @throws {Error} If the material dialog service has not been initialized properly.\n   */\n  static open<T, D = unknown, R = unknown>(\n    this: ModalComponentConstructor<T, D> & typeof BaseModalComponent,\n    data?: D, config?: MatDialogConfig<D>\n  ): MatDialogRef<T, R> {\n    if (this === BaseModalComponent) {\n      throw new Error('BaseModalComponent must be subclassed to open new modals');\n    }\n\n    if (!this.dialogService) {\n      throw new Error('MatDialog service not found');\n    }\n\n    return this.dialogService.open(this, {\n      ...this.DEFAULT_CONFIG,\n      ...config,\n      data: {\n        ...this.DEFAULT_CONFIG?.data,\n        ...this.DEFAULT_DATA,\n        ...config?.data,\n        ...data\n      }\n    });\n  }\n\n  /**\n   * Does nothing. Purely for type inference purposes.\n   *\n   * @param _args Unused\n   */\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(..._args: unknown[]) {\n    // Intentionally empty to get correct inference for `open`\n  }\n}\n","import { APP_INITIALIZER, ModuleWithProviders, NgModule } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\n\nimport { BaseModalComponent } from './base-modal.component';\n\n\n/**\n * Factory function for initializing modals.\n *\n * @param dialogService The material dialog service used to open modals.\n * @returns An initialization function.\n */\nfunction dialogServiceInitializationFactory(dialogService: MatDialog): () => void {\n  return () => {\n    BaseModalComponent.dialogService = dialogService;\n  };\n}\n\n\n/**\n * Module providing functionality to make working with modals easier.\n */\n@NgModule()\nexport class BaseModalModule {\n  /**\n   * Configures the modal base component.\n   *\n   * @returns This module with the necessary providers.\n   */\n  static forRoot(): ModuleWithProviders<BaseModalModule> {\n    return {\n      ngModule: BaseModalModule,\n      providers: [\n        {\n          provide: APP_INITIALIZER,\n          useFactory: dialogServiceInitializationFactory,\n          deps: [MatDialog],\n          multi: true\n        }\n      ]\n    };\n  }\n}\n","import { Directive, Type } from '@angular/core';\nimport { MatSnackBar, MatSnackBarConfig, MatSnackBarRef } from '@angular/material/snack-bar';\n\n\n/**\n * Type of popup components\n *\n * @template T The instance type.\n * @template D Pupup data type.\n */\nexport interface PopupComponentConstructor<T, D> extends Type<T> {\n  /** Optional default data used whenever a new popup is opened. */\n  readonly DEFAULT_DATA?: D;\n  /** Optional default configuration used whenever a new popup is opened. */\n  readonly DEFAULT_CONFIG?: MatSnackBarConfig<D>;\n}\n\n\n/**\n * Base class for popups.\n */\n@Directive()\nexport class BasePopupComponent {\n  /** Material snack bar service. Initialized in APP_INITIALIZER. */\n  static snackBarService: MatSnackBar;\n\n  /**\n   * Opens a new subclass popup.\n   *\n   * @template T Popup instance type.\n   * @template D Popup data type.\n   *\n   * @param this Reference to the subclass (properly typed).\n   * @param [data] Additional user data to pass to the popup.\n   * @param [config] Additional configuration.\n   * @returns A reference to the popup.\n   * @throws {Error} If open is called on a non subclass.\n   * @throws {Error} If the material snack bar service has not been initialized properly.\n   */\n  static open<T, D = unknown>(\n    this: PopupComponentConstructor<T, D> & typeof BasePopupComponent,\n    data?: D, config?: MatSnackBarConfig<D>\n  ): MatSnackBarRef<T> {\n    if (this === BasePopupComponent) {\n      throw new Error('BasePopupComponent must be subclassed to open new popups');\n    }\n\n    if (!this.snackBarService) {\n      throw new Error('MatSnackBar service not found');\n    }\n\n    return this.snackBarService.openFromComponent(this, {\n      ...this.DEFAULT_CONFIG,\n      ...config,\n      data: {\n        ...this.DEFAULT_CONFIG?.data,\n        ...this.DEFAULT_DATA,\n        ...config?.data,\n        ...data\n      }\n    });\n  }\n\n  /**\n   * Does nothing. Purely for type inference purposes.\n   *\n   * @param _args Unused\n   */\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(..._args: unknown[]) {\n    // Intentionally empty to get correct inference for `open`\n  }\n}\n","import { APP_INITIALIZER, ModuleWithProviders, NgModule } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\nimport { BasePopupComponent } from './base-popup.component';\n\n\n/**\n * Factory function for initializing popups.\n *\n * @param snackBarService The material dialog service used to open popups.\n * @returns An initialization function.\n */\nfunction snackBarServiceInitializationFactory(snackBarService: MatSnackBar): () => void {\n  return () => {\n    BasePopupComponent.snackBarService = snackBarService;\n  };\n}\n\n\n/**\n * Module providing functionality to make working with popups easier.\n */\n@NgModule()\nexport class BasePopupModule {\n  /**\n   * Configures the popup base component.\n   *\n   * @returns This module with the necessary providers.\n   */\n  static forRoot(): ModuleWithProviders<BasePopupModule> {\n    return {\n      ngModule: BasePopupModule,\n      providers: [\n        {\n          provide: APP_INITIALIZER,\n          useFactory: snackBarServiceInitializationFactory,\n          deps: [MatSnackBar],\n          multi: true\n        }\n      ]\n    };\n  }\n}\n","import { ChangeDetectionStrategy, Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nimport { BaseModalComponent } from '../base-modal/base-modal.component';\n\n\nexport interface MarkdownModalData {\n  title: string;\n  src: string;\n}\n\n@Component({\n  selector: 'm4s-markdown-modal',\n  templateUrl: './markdown-modal.component.html',\n  styleUrls: ['./markdown-modal.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MarkdownModalComponent extends BaseModalComponent {\n  /** Default data. Used for type inference. */\n  static readonly DEFAULT_DATA: MarkdownModalData;\n\n  constructor(@Inject(MAT_DIALOG_DATA) readonly data: MarkdownModalData) {\n    super();\n  }\n}\n","<h2 mat-dialog-title class=\"header\">\n  <div class=\"title\">{{ data.title | uppercase }}</div>\n\n  <div class=\"filler\"></div>\n\n  <button mat-icon-button mat-dialog-close class=\"close\" tabindex=\"-1\">\n    <mat-icon>close</mat-icon>\n  </button>\n</h2>\n\n<mat-dialog-content>\n  <markdown [src]=\"data.src\"></markdown>\n</mat-dialog-content>","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MarkdownModule } from 'ngx-markdown';\n\nimport { MarkdownModalComponent } from './markdown-modal.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n\n    MatButtonModule,\n    MatDialogModule,\n    MatIconModule,\n\n    MarkdownModule\n  ],\n  declarations: [MarkdownModalComponent],\n  exports: [MarkdownModalComponent]\n})\nexport class MarkdownModalModule { }\n","export const sharedEnvironment = {\n  siteConfigurationUrl: 'assets/configuration/site.yml'\n};\n","import 'zone.js/plugins/zone-error';\n\nimport { sharedEnvironment } from './environment.shared';\n\n\nexport const environment = {\n  ...sharedEnvironment,\n  production: false,\n  googleAnalyticsToken: 'G-B3DT7XPMRT'\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(() => {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = () => ([]);\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 8718;\nmodule.exports = webpackEmptyAsyncContext;"],"names":[],"sourceRoot":"webpack:///"}